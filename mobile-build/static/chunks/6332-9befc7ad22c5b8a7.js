"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6332],{3998:(e,t,r)=>{r.d(t,{$:()=>l});var n=r(12115),i=r(32467),s=r(83101),a=r(64269);let o=(0,s.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm hover:shadow-md",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm hover:shadow-md",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground shadow-sm hover:shadow-md",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",gradient:"bg-gradient-to-r from-primary to-blue-600 text-white hover:from-blue-600 hover:to-primary shadow-lg hover:shadow-xl"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3 text-xs",lg:"h-12 rounded-lg px-8 text-base",xl:"h-14 rounded-xl px-10 text-lg",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:u=!1,...c}=e,h=u?i.DX:"button";return n.createElement(h,{className:(0,a.cn)(o({variant:s,size:l,className:r})),ref:t,...c})});l.displayName="Button"},9572:(e,t,r)=>{r.r(t),r.d(t,{createSupabaseClient:()=>a.U,safeGetUser:()=>u,supabase:()=>l});var n=r(65040),i=r(30218);let s=null;var a=r(96648);let o=null,l=function(){if(!o)try{o=function(){if(s)return s;let e="https://wkmbtgrnsdtrhjkuspqh.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndrbWJ0Z3Juc2R0cmhqa3VzcHFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzMTUwMDMsImV4cCI6MjA3MTg5MTAwM30.25decK8tL-7HyltFwtAexQTpk2jJHFVi2wq-v2q9Akw";if(!e||!t)throw Error("Missing Supabase environment variables");let r=(s=(0,n.UU)(e,t,{auth:{autoRefreshToken:!1,persistSession:!0,detectSessionInUrl:!0,storage:{getItem:e=>{try{return localStorage.getItem(e)}catch(e){return console.warn("[OfflineClient] Failed to get item from storage:",e),null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(e){console.warn("[OfflineClient] Failed to set item in storage:",e)}},removeItem:e=>{try{localStorage.removeItem(e)}catch(e){console.warn("[OfflineClient] Failed to remove item from storage:",e)}}}},global:{headers:{"X-Client-Info":"pathniti-offline-client"}}})).auth.getSession.bind(s.auth),a=s.auth.getUser.bind(s.auth),o=s.auth.signInWithPassword.bind(s.auth),l=s.auth.signUp.bind(s.auth),u=s.auth.signOut.bind(s.auth),c=s.auth.refreshSession.bind(s.auth);return s.auth.getSession=async()=>{try{let e=await r();return e.data.session&&await i.t.saveOfflineAuthState(e.data.session.user,e.data.session),e}catch(e){if(console.warn("[OfflineClient] getSession failed, trying offline state:",e),await i.t.handleAuthError(e)){let e=await i.t.getOfflineAuthState();if(e)return{data:{session:e.session,user:e.user},error:null}}throw e}},s.auth.getUser=async()=>{try{let e=await a();if(e.data.user&&s){let t=await s.auth.getSession();await i.t.saveOfflineAuthState(e.data.user,t.data.session)}return e}catch(e){if(console.warn("[OfflineClient] getUser failed, trying offline state:",e),await i.t.handleAuthError(e)){let e=await i.t.getOfflineAuthState();if(e)return{data:{user:e.user},error:null}}throw e}},s.auth.signInWithPassword=async e=>{try{let t=await o(e);return t.data.session&&t.data.user&&await i.t.saveOfflineAuthState(t.data.user,t.data.session),t}catch(e){throw console.error("[OfflineClient] signIn failed:",e),e}},s.auth.signUp=async e=>{try{let t=await l(e);return t.data.session&&t.data.user&&await i.t.saveOfflineAuthState(t.data.user,t.data.session),t}catch(e){throw console.error("[OfflineClient] signUp failed:",e),e}},s.auth.signOut=async()=>{try{let e=await u();return await i.t.clearOfflineAuthState(),e}catch(e){throw console.warn("[OfflineClient] signOut failed, clearing offline state anyway:",e),await i.t.clearOfflineAuthState(),e}},s.auth.refreshSession=async e=>{try{let t=await c(e);return t.data.session&&t.data.user&&await i.t.saveOfflineAuthState(t.data.user,t.data.session),t}catch(t){throw console.warn("[OfflineClient] refreshSession failed:",t),await i.t.handleAuthError(t)&&await i.t.queueRetryAction(async()=>{try{await c(e)}catch(e){console.error("[OfflineClient] Retry refreshSession failed:",e)}}),t}},s.auth.onAuthStateChange(async(e,t)=>{console.log("[OfflineClient] Auth state changed:",e),t?await i.t.saveOfflineAuthState(t.user,t):"SIGNED_OUT"===e&&await i.t.clearOfflineAuthState()}),s}(),console.log("[Supabase] Singleton client created successfully")}catch(e){throw console.error("Failed to create Supabase client:",e),e}return o}();async function u(){try{let{data:{session:e}}=await l.auth.getSession();if(!e)return{data:{user:null},error:Error("No active session")};return await l.auth.getUser()}catch(e){return console.warn("safeGetUser failed:",e),{data:{user:null},error:e}}}},11647:(e,t,r)=>{r.d(t,{E:()=>o});var n=r(95155);r(12115);var i=r(83101),s=r(64269);let a=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 hover:bg-green-200",warning:"border-transparent bg-yellow-100 text-yellow-800 hover:bg-yellow-200",info:"border-transparent bg-blue-100 text-blue-800 hover:bg-blue-200"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...i}=e;return(0,n.jsx)("div",{className:(0,s.cn)(a({variant:r}),t),...i})}},30218:(e,t,r)=>{r.d(t,{t:()=>i});class n{setupEventListeners(){if(window.addEventListener("online",()=>{console.log("[OfflineAuth] Network came online"),this.isOnline=!0,this.lastOnlineTime=Date.now(),this.notifyConnectionListeners(),this.processRetryQueue()}),window.addEventListener("offline",()=>{console.log("[OfflineAuth] Network went offline"),this.isOnline=!1,this.notifyConnectionListeners()}),"connection"in navigator){let e=navigator.connection;e&&e.addEventListener("change",()=>{this.notifyConnectionListeners()})}}startConnectionMonitoring(){setInterval(()=>{this.checkConnectionStatus()},3e4)}async checkConnectionStatus(){try{let e=new AbortController,t=setTimeout(()=>e.abort(),5e3),r=await fetch("/api/health",{method:"HEAD",signal:e.signal,cache:"no-cache"});clearTimeout(t),r.ok&&!this.isOnline&&(console.log("[OfflineAuth] Connection restored via health check"),this.isOnline=!0,this.lastOnlineTime=Date.now(),this.notifyConnectionListeners(),this.processRetryQueue())}catch(e){this.isOnline&&(console.log("[OfflineAuth] Connection lost via health check"),this.isOnline=!1,this.notifyConnectionListeners())}}getNetworkStatus(){var e;return{isOnline:this.isOnline,lastOnlineTime:this.lastOnlineTime,connectionType:"connection"in navigator?null==(e=navigator.connection)?void 0:e.effectiveType:void 0}}addConnectionListener(e){return this.connectionListeners.add(e),()=>this.connectionListeners.delete(e)}addAuthStateListener(e){return this.authStateListeners.add(e),()=>this.authStateListeners.delete(e)}notifyConnectionListeners(){let e=this.getNetworkStatus();this.connectionListeners.forEach(t=>{try{t(e)}catch(e){console.error("[OfflineAuth] Error in connection listener:",e)}})}notifyAuthStateListeners(e){this.authStateListeners.forEach(t=>{try{t(e)}catch(e){console.error("[OfflineAuth] Error in auth state listener:",e)}})}async saveOfflineAuthState(e,t){try{let r={user:e,session:t,isOnline:this.isOnline,lastSyncTime:Date.now(),pendingActions:[]};localStorage.setItem("offline_auth_state",JSON.stringify(r)),this.notifyAuthStateListeners(r),console.log("[OfflineAuth] Saved offline auth state")}catch(e){console.error("[OfflineAuth] Failed to save offline auth state:",e)}}async getOfflineAuthState(){try{let e=localStorage.getItem("offline_auth_state");if(!e)return null;let t=JSON.parse(e);if(t.session&&t.session.expires_at){let e=new Date(t.session.expires_at).getTime(),r=Date.now();if(e<=r)return console.log("[OfflineAuth] Stored session expired, clearing"),this.clearOfflineAuthState(),null}return t}catch(e){return console.error("[OfflineAuth] Failed to get offline auth state:",e),null}}async clearOfflineAuthState(){try{localStorage.removeItem("offline_auth_state"),console.log("[OfflineAuth] Cleared offline auth state")}catch(e){console.error("[OfflineAuth] Failed to clear offline auth state:",e)}}async queueRetryAction(e){this.retryQueue.push(e),console.log("[OfflineAuth] Queued retry action, queue length:",this.retryQueue.length),this.isOnline&&this.processRetryQueue()}async processRetryQueue(){if(!this.isRetrying&&0!==this.retryQueue.length&&this.isOnline){this.isRetrying=!0,console.log("[OfflineAuth] Processing retry queue, items:",this.retryQueue.length);try{for(;this.retryQueue.length>0&&this.isOnline;){let e=this.retryQueue.shift();if(e)try{await e(),console.log("[OfflineAuth] Successfully executed queued action")}catch(t){if(console.error("[OfflineAuth] Failed to execute queued action:",t),this.isNetworkError(t)){this.retryQueue.unshift(e);break}}}}finally{this.isRetrying=!1}}}isNetworkError(e){if(e instanceof Error){let t=e.message.toLowerCase();return t.includes("network")||t.includes("fetch")||t.includes("connection")||t.includes("timeout")||t.includes("internet_disconnected")}return!1}async handleAuthError(e){return!!this.isNetworkError(e)&&!this.isOnline&&(console.log("[OfflineAuth] Network error while offline, will retry when online"),!0)}async waitForConnection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;return!!this.isOnline||new Promise(t=>{let r=setTimeout(()=>{n(),t(!1)},e),n=this.addConnectionListener(e=>{e.isOnline&&(clearTimeout(r),n(),t(!0))})})}destroy(){this.retryInterval&&clearInterval(this.retryInterval),this.connectionListeners.clear(),this.authStateListeners.clear(),this.retryQueue=[]}constructor(){this.isOnline=navigator.onLine,this.lastOnlineTime=Date.now(),this.connectionListeners=new Set,this.authStateListeners=new Set,this.retryQueue=[],this.isRetrying=!1,this.retryInterval=null,this.setupEventListeners(),this.startConnectionMonitoring()}}let i=new n},64269:(e,t,r)=>{r.d(t,{cn:()=>s});var n=r(2821),i=r(75889);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,n.$)(t))}},86948:(e,t,r)=>{r.d(t,{BT:()=>u,Wu:()=>c,ZB:()=>l,Zp:()=>a,aR:()=>o});var n=r(95155),i=r(12115),s=r(64269);let a=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow-sm hover:shadow-md transition-all duration-200",r),...i})});a.displayName="Card";let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6 pb-4",r),...i})});o.displayName="CardHeader";let l=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...i})});l.displayName="CardTitle";let u=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...i})});u.displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-2",r),...i})});c.displayName="CardContent",i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...i})}).displayName="CardFooter"},96648:(e,t,r)=>{r.d(t,{U:()=>i});var n=r(65040);function i(){let e="https://wkmbtgrnsdtrhjkuspqh.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndrbWJ0Z3Juc2R0cmhqa3VzcHFoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYzMTUwMDMsImV4cCI6MjA3MTg5MTAwM30.25decK8tL-7HyltFwtAexQTpk2jJHFVi2wq-v2q9Akw";if(!e||!t)throw Error("Missing Supabase environment variables");return(0,n.UU)(e,t,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})}}}]);