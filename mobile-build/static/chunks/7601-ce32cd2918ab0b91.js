"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7601],{27601:(e,s,t)=>{t.d(s,{A:()=>N});var a=t(95155),r=t(12115),l=t(86948),c=t(11647),n=t(3998),i=t(13406),d=t(18332),x=t(47937),o=t(52056),m=t(70532),h=t(57828),u=t(42529),j=t(78874),g=t(26983);function N(e){let{userId:s,className:t=""}=e,[N,p]=(0,r.useState)(null),[f,v]=(0,r.useState)(!0),[y,b]=(0,r.useState)(null),[w,_]=(0,r.useState)(!1),[A,T]=(0,r.useState)("overview");(0,r.useEffect)(()=>{let e=async()=>{try{v(!0),b(null);let e=await fetch("/api/assessment/last-test?user_id=".concat(s)),t=await e.json();e.ok&&t.success?p(t.data):404===e.status?(p(null),b("No completed assessments found. Complete a quiz to see your results here!")):b(t.error||"Failed to fetch last test")}catch(e){console.error("Error fetching last test:",e),b("Failed to load last test data")}finally{v(!1)}};s&&e()},[s]);let C=e=>{if(e<60)return"".concat(e,"s");let s=Math.floor(e/60);return"".concat(s,"m ").concat(e%60,"s")},Z=e=>{switch(null==e?void 0:e.toLowerCase()){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=e=>{switch(null==e?void 0:e.toLowerCase()){case"aptitude":return"bg-blue-100 text-blue-800";case"interest":return"bg-purple-100 text-purple-800";case"personality":return"bg-pink-100 text-pink-800";default:return"bg-gray-100 text-gray-800"}};if(f)return(0,a.jsxs)(l.Zp,{className:t,children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-blue-600"}),"Last Test Review"]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading your last test..."})]})})]});if(y||!N)return(0,a.jsxs)(l.Zp,{className:t,children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-blue-600"}),"Last Test Review"]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)(d.Alert,{variant:"destructive",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),(0,a.jsxs)(d.AlertDescription,{children:[y||"No test data found. Please complete an assessment first.",!y&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>window.location.href="/assessment",children:"Take Assessment"})})]})]})})]});let{session:E,questions:q,summary:W}=N,M=W.total_questions>0?W.correct_answers/W.total_questions*100:0;return(0,a.jsxs)(l.Zp,{className:t,children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(x.A,{className:"h-5 w-5 text-blue-600"}),"Last Test Review"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>_(!w),children:w?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Hide Answers"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Show Answers"]})}),(0,a.jsx)(c.E,{variant:"secondary",children:new Date(E.completed_at).toLocaleDateString()})]})]})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)(i.Tabs,{value:A,onValueChange:T,children:[(0,a.jsxs)(i.TabsList,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(i.TabsTrigger,{value:"overview",children:"Overview"}),(0,a.jsx)(i.TabsTrigger,{value:"questions",children:"Questions"}),(0,a.jsx)(i.TabsTrigger,{value:"analysis",children:"Analysis"})]}),(0,a.jsxs)(i.TabsContent,{value:"overview",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:W.correct_answers}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Correct"})]})}),(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:W.incorrect_answers}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Incorrect"})]})}),(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"p-4 text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(M),"%"]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Accuracy"})]})}),(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:C(Math.round(W.average_time_per_question))}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Time"})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Test Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Total Questions:"}),(0,a.jsx)("span",{className:"font-medium",children:W.total_questions})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Correct Answers:"}),(0,a.jsx)("span",{className:"font-medium text-green-600",children:W.correct_answers})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Incorrect Answers:"}),(0,a.jsx)("span",{className:"font-medium text-red-600",children:W.incorrect_answers})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Unanswered:"}),(0,a.jsx)("span",{className:"font-medium text-gray-600",children:W.unanswered})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Accuracy:"}),(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(M),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Average Time:"}),(0,a.jsx)("span",{className:"font-medium",children:C(Math.round(W.average_time_per_question))})]})]})]})]})]}),(0,a.jsx)(i.TabsContent,{value:"questions",className:"space-y-4",children:(0,a.jsx)("div",{className:"space-y-4",children:q.map((e,s)=>(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)(c.E,{variant:"outline",children:["Q",s+1]}),(0,a.jsx)(c.E,{className:k(e.category),children:e.category}),(0,a.jsx)(c.E,{className:Z(e.difficulty_level),children:e.difficulty_level})]}),(0,a.jsx)(l.ZB,{className:"text-lg",children:e.question_text})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!0===e.is_correct&&(0,a.jsx)(u.A,{className:"h-5 w-5 text-green-500"}),!1===e.is_correct&&(0,a.jsx)(j.A,{className:"h-5 w-5 text-red-500"}),null===e.is_correct&&(0,a.jsx)(o.A,{className:"h-5 w-5 text-yellow-500"}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),C(e.time_taken)]})]})]})}),(0,a.jsxs)(l.Wu,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-2",children:e.options.map((s,t)=>{let r=t===e.correct_answer,l=t===e.user_answer,n=l&&!r;return(0,a.jsx)("div",{className:"p-3 rounded-lg border ".concat(w?r?"bg-green-50 border-green-200":n?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200":l?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"font-medium",children:[String.fromCharCode(65+t),"."]}),(0,a.jsx)("span",{children:s}),w&&r&&(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-500 ml-auto"}),w&&n&&(0,a.jsx)(j.A,{className:"h-4 w-4 text-red-500 ml-auto"}),!w&&l&&(0,a.jsx)(c.E,{variant:"secondary",className:"ml-auto",children:"Your Answer"})]})},t)})}),w&&e.explanation&&(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-1",children:"Explanation:"}),(0,a.jsx)("p",{className:"text-blue-800 text-sm",children:e.explanation})]})]})]},e.question_id))})}),(0,a.jsx)(i.TabsContent,{value:"analysis",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Performance by Category"}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(q.reduce((e,s)=>(e[s.category]||(e[s.category]={total:0,correct:0}),e[s.category].total++,s.is_correct&&e[s.category].correct++,e),{})).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.E,{className:k(s),children:s}),(0,a.jsxs)("span",{children:[t.correct,"/",t.total," correct"]})]}),(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(t.correct/t.total*100),"%"]})]},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Performance by Difficulty"}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(q.reduce((e,s)=>(e[s.difficulty_level]||(e[s.difficulty_level]={total:0,correct:0}),e[s.difficulty_level].total++,s.is_correct&&e[s.difficulty_level].correct++,e),{})).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.E,{className:Z(s),children:s}),(0,a.jsxs)("span",{children:[t.correct,"/",t.total," correct"]})]}),(0,a.jsxs)("span",{className:"font-medium",children:[Math.round(t.correct/t.total*100),"%"]})]},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Time Analysis"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-blue-600",children:C(Math.round(W.average_time_per_question))}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Average per Question"})]})}),(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-green-600",children:C(Math.round(q.filter(e=>e.is_correct).reduce((e,s)=>e+s.time_taken,0)/q.filter(e=>e.is_correct).length||0))}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg for Correct"})]})}),(0,a.jsx)(l.Zp,{children:(0,a.jsxs)(l.Wu,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-red-600",children:C(Math.round(q.filter(e=>!1===e.is_correct).reduce((e,s)=>e+s.time_taken,0)/q.filter(e=>!1===e.is_correct).length||0))}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Avg for Incorrect"})]})})]})]})]})})]})})]})}}}]);