(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4737],{1451:(e,s,a)=>{"use strict";a.d(s,{Zn:()=>t});var l=a(95155);function t(e){let{className:s="",size:a="md",showText:t=!0,variant:r="horizontal"}=e,i={sm:{text:"text-sm"},md:{text:"text-lg"},lg:{text:"text-xl"},xl:{text:"text-2xl"}}[a];return"horizontal"===r?(0,l.jsx)("div",{className:"flex items-center ".concat(s),children:t&&(0,l.jsxs)("div",{className:"".concat(i.text," leading-none"),children:[(0,l.jsx)("span",{className:"font-bold text-[#1A237E] tracking-tight",children:"Path"}),(0,l.jsx)("span",{className:"font-normal text-[#546E7A]",children:"Niti"})]})}):(0,l.jsx)("div",{className:"flex flex-col items-center ".concat(s),children:t&&(0,l.jsxs)("div",{className:"".concat(i.text," leading-none"),children:[(0,l.jsx)("span",{className:"font-bold text-[#1A237E] tracking-tight",children:"Path"}),(0,l.jsx)("span",{className:"font-normal text-[#546E7A]",children:"Niti"})]})})}a(12115)},30736:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>x});var l=a(95155),t=a(12115),r=a(20063),i=a(65523),n=a(47061),c=a(9572),d=a(20508),o=a(89442),m=a(21873),h=a(1451);function x(){let{user:e,profile:s}=(0,n.A)(),a=(0,r.useRouter)(),[x,u]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),[g,v]=(0,t.useState)({firstName:"",lastName:"",dateOfBirth:"",gender:"",classLevel:"",stream:"",state:"",city:"",pincode:"",interests:[]}),[j,N]=(0,t.useState)(1);(0,t.useEffect)(()=>{e&&s&&(console.log("User already has a profile, redirecting to dashboard"),console.log("Profile data:",s),a.push("/dashboard"))},[e,s,a]);let b=e=>{v({...g,[e.target.name]:e.target.value})},y=async s=>{if(s.preventDefault(),u(!0),f(""),!e){f("User not authenticated"),u(!1);return}try{console.log("Creating profile for user:",e.id);let s={id:e.id,email:e.email,first_name:g.firstName,last_name:g.lastName,date_of_birth:g.dateOfBirth,gender:g.gender,class_level:g.classLevel,stream:g.stream,location:{state:g.state,city:g.city,pincode:g.pincode},interests:g.interests,role:"student",is_verified:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};console.log("Profile data:",s);let{error:l}=await c.supabase.from("profiles").upsert(s);if(l)throw console.error("Profile creation error:",l),l;console.log("Profile created successfully, redirecting to dashboard"),console.log("Profile data that was created:",s),setTimeout(()=>{a.push("/dashboard")},500)}catch(e){console.error("Complete profile error:",e),f(e instanceof Error?e.message:"An error occurred")}finally{u(!1)}},C=()=>{switch(j){case 1:return g.firstName&&g.lastName&&g.dateOfBirth&&g.gender;case 2:return g.classLevel&&g.stream;case 3:return g.state&&g.city&&g.pincode;default:return!1}};return e?(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"w-full max-w-2xl",children:[(0,l.jsx)("div",{className:"text-center mb-8",children:(0,l.jsx)(h.Zn,{size:"lg",showText:!0,variant:"horizontal"})}),(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{className:"text-center",children:[(0,l.jsx)(i.ZB,{className:"text-2xl",children:"Complete Your Profile"}),(0,l.jsx)(i.BT,{children:"Help us personalize your career guidance experience"}),(0,l.jsx)("div",{className:"flex justify-center mt-4",children:(0,l.jsx)("div",{className:"flex space-x-2",children:Array.from({length:3},(e,s)=>(0,l.jsx)("div",{className:"w-8 h-2 rounded-full ".concat(s+1<=j?"bg-primary":"bg-gray-200")},s))})})]}),(0,l.jsxs)(i.Wu,{children:[p&&(0,l.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md mb-4",children:p}),(0,l.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[1===j&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,l.jsx)(d.A,{className:"h-5 w-5 mr-2"}),"Personal Information"]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"firstName",className:"text-sm font-medium",children:"First Name"}),(0,l.jsx)(i.pd,{id:"firstName",name:"firstName",value:g.firstName,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"lastName",className:"text-sm font-medium",children:"Last Name"}),(0,l.jsx)(i.pd,{id:"lastName",name:"lastName",value:g.lastName,onChange:b,required:!0})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"dateOfBirth",className:"text-sm font-medium",children:"Date of Birth"}),(0,l.jsx)(i.pd,{id:"dateOfBirth",name:"dateOfBirth",type:"date",value:g.dateOfBirth,onChange:b,required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"gender",className:"text-sm font-medium",children:"Gender"}),(0,l.jsxs)("select",{id:"gender",name:"gender",value:g.gender,onChange:b,className:"w-full p-2 border border-gray-300 rounded-md",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select gender"}),[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"},{value:"prefer_not_to_say",label:"Prefer not to say"}].map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),2===j&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,l.jsx)(o.A,{className:"h-5 w-5 mr-2"}),"Academic Information"]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"classLevel",className:"text-sm font-medium",children:"Current Class Level"}),(0,l.jsxs)("select",{id:"classLevel",name:"classLevel",value:g.classLevel,onChange:b,className:"w-full p-2 border border-gray-300 rounded-md",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select class level"}),[{value:"10",label:"Class 10"},{value:"12",label:"Class 12"},{value:"undergraduate",label:"Undergraduate"},{value:"postgraduate",label:"Postgraduate"}].map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"stream",className:"text-sm font-medium",children:"Stream/Field of Interest"}),(0,l.jsxs)("select",{id:"stream",name:"stream",value:g.stream,onChange:b,className:"w-full p-2 border border-gray-300 rounded-md",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select stream"}),[{value:"science",label:"Science"},{value:"commerce",label:"Commerce"},{value:"arts",label:"Arts"},{value:"vocational",label:"Vocational"},{value:"engineering",label:"Engineering"},{value:"medical",label:"Medical"}].map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{className:"text-sm font-medium",children:"Interests (Select all that apply)"}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["Mathematics","Science","Literature","History","Geography","Computer Science","Art & Design","Music","Sports","Dance","Photography","Writing","Public Speaking","Leadership","Research","Problem Solving","Creativity","Technology"].map(e=>(0,l.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"checkbox",checked:g.interests.includes(e),onChange:()=>{v({...g,interests:g.interests.includes(e)?g.interests.filter(s=>s!==e):[...g.interests,e]})},className:"rounded"}),(0,l.jsx)("span",{className:"text-sm",children:e})]},e))})]})]}),3===j&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,l.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Location Information"]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"state",className:"text-sm font-medium",children:"State"}),(0,l.jsx)(i.pd,{id:"state",name:"state",value:g.state,onChange:b,placeholder:"Enter your state",required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"city",className:"text-sm font-medium",children:"City"}),(0,l.jsx)(i.pd,{id:"city",name:"city",value:g.city,onChange:b,placeholder:"Enter your city",required:!0})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("label",{htmlFor:"pincode",className:"text-sm font-medium",children:"Pincode"}),(0,l.jsx)(i.pd,{id:"pincode",name:"pincode",value:g.pincode,onChange:b,placeholder:"Enter your pincode",required:!0})]})]}),(0,l.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,l.jsx)(i.$n,{type:"button",variant:"outline",onClick:()=>{j>1&&N(j-1)},disabled:1===j,children:"Previous"}),j<3?(0,l.jsx)(i.$n,{type:"button",onClick:()=>{j<3&&N(j+1)},disabled:!C(),children:"Next"}):(0,l.jsx)(i.$n,{type:"submit",disabled:x||!C(),children:x?"Completing Profile...":"Complete Profile"})]})]})]})]})]})}):(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center p-4",children:(0,l.jsx)(i.Zp,{className:"w-full max-w-md",children:(0,l.jsxs)(i.Wu,{className:"pt-6 text-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Authentication Required"}),(0,l.jsx)("p",{className:"text-gray-600 mb-4",children:"Please sign in to complete your profile."}),(0,l.jsx)(i.$n,{asChild:!0,children:(0,l.jsx)("a",{href:"/auth/login",children:"Sign In"})})]})})})}},52569:(e,s,a)=>{Promise.resolve().then(a.bind(a,30736))}},e=>{e.O(0,[8096,6332,7061,6867,5523,8441,7358],()=>e(e.s=52569)),_N_E=e.O()}]);