(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4678],{39034:(e,s,t)=>{Promise.resolve().then(t.bind(t,56459))},56459:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(95155),l=t(12115),r=t(47061),i=t(20063),n=t(86948),c=t(3998),d=t(80991),m=t(11647),o=t(1473),x=t(80647),u=t(17666),h=t(39068),j=t(6132),g=t(26983),p=t(42529);let f={science_aptitude:o.A,math_aptitude:x.A,logical_reasoning:u.A,general_knowledge:h.A},N={science_aptitude:"bg-blue-100 text-blue-800",math_aptitude:"bg-green-100 text-green-800",logical_reasoning:"bg-purple-100 text-purple-800",general_knowledge:"bg-orange-100 text-orange-800"};function b(){let{user:e,loading:s}=(0,r.A)(),t=(0,i.useRouter)(),[x,u]=(0,l.useState)(null),[h,b]=(0,l.useState)(0),[y,v]=(0,l.useState)(null),[w,_]=(0,l.useState)([]),[k,S]=(0,l.useState)(0),[A,C]=(0,l.useState)(0),[E,q]=(0,l.useState)(!1),[O,Z]=(0,l.useState)(!0),[R,T]=(0,l.useState)(null),P=(0,l.useCallback)(async()=>{try{var s;Z(!0);let t=await fetch("/api/career-assessment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null==e?void 0:e.id,student_class:"10th",assessment_type:"career_guidance"})});if(!t.ok)throw Error("Failed to load assessment");let a=await t.json();u(a),S((null==(s=a.questions[0])?void 0:s.time_limit)||60),C(Date.now())}catch(e){console.error("Error loading assessment:",e),T("Failed to load assessment. Please try again.")}finally{Z(!1)}},[null==e?void 0:e.id]),F=(0,l.useCallback)(async s=>{if(x){q(!0);try{let a=s.reduce((e,s)=>e+s.time_taken,0),l=await fetch("/api/career-assessment/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assessment_id:x.assessment_id,user_id:null==e?void 0:e.id,responses:s,total_time_seconds:a})});if(!l.ok)throw Error("Failed to submit assessment");await l.json(),t.push("/career-results?assessment_id=".concat(x.assessment_id))}catch(e){console.error("Error submitting assessment:",e),T("Failed to submit assessment. Please try again.")}finally{q(!1)}}},[x,null==e?void 0:e.id,t]),W=(0,l.useCallback)(()=>{if(!x||null==y||y<0)return;let e=x.questions[h],s=(Date.now()-A)/1e3,t=[...w,{question_id:e.id,selected_answer:y,time_taken:s,category:e.category}];_(t),h<x.questions.length-1?(b(h+1),v(null),S(x.questions[h+1].time_limit),C(Date.now())):F(t)},[x,y,h,w,A,F]);(0,l.useEffect)(()=>{!s&&e&&P()},[e,s,P]),(0,l.useEffect)(()=>{if(k>0){let e=setTimeout(()=>{S(k-1)},1e3);return()=>clearTimeout(e)}0===k&&x&&W()},[k,x,W]);let B=e=>{let s=f[e]||o.A;return(0,a.jsx)(s,{className:"w-4 h-4"})};if(s||O)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:s?"Loading...":"Preparing your career assessment..."})]})});if(R)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsx)(n.Zp,{className:"w-full max-w-md",children:(0,a.jsx)(n.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(j.A,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Assessment Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:R}),(0,a.jsx)(c.$,{onClick:()=>window.location.reload(),children:"Try Again"})]})})})});if(!x)return(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,a.jsx)(n.Zp,{className:"w-full max-w-md",children:(0,a.jsx)(n.Wu,{className:"pt-6",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(j.A,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No Assessment Available"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Unable to load assessment data."})]})})})});let D=x.questions[h],Q=(h+1)/x.total_questions*100;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,a.jsx)(n.Zp,{className:"mb-6",children:(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ZB,{className:"text-2xl",children:"Career Assessment"}),(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:["Class ",x.student_class," â€¢ ",x.total_questions," Questions"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,a.jsx)(g.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(e=>{let s=Math.floor(e/60);return"".concat(s,":").concat((e%60).toString().padStart(2,"0"))})(k)})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["Question ",h+1," of ",x.total_questions]})]})]}),(0,a.jsx)(d.k,{value:Q,className:"mt-4"})]})}),(0,a.jsxs)(n.Zp,{className:"mb-6",children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[B(D.category),(0,a.jsx)(m.E,{className:N[D.category]||"bg-gray-100 text-gray-800",children:D.category.replace("_"," ").toUpperCase()}),(0,a.jsx)(m.E,{variant:"outline",children:1===D.difficulty_level?"Easy":2===D.difficulty_level?"Medium":"Hard"})]}),(0,a.jsx)(n.ZB,{className:"text-lg leading-relaxed",children:D.question_text})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:D.options.map((e,s)=>(0,a.jsx)("button",{onClick:()=>{v(s)},className:"w-full p-4 text-left rounded-lg border-2 transition-all ".concat(y===s?"border-primary bg-primary/5 text-primary":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center ".concat(y===s?"border-primary bg-primary text-white":"border-gray-300"),children:y===s&&(0,a.jsx)(p.A,{className:"w-4 h-4"})}),(0,a.jsxs)("span",{className:"font-medium",children:[String.fromCharCode(65+s),"."]}),(0,a.jsx)("span",{children:e})]})},s))})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[w.length," questions answered"]}),(0,a.jsx)(c.$,{onClick:W,disabled:null==y||y<0||E,className:"px-8",children:E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Submitting..."]}):h<x.questions.length-1?"Next Question":"Submit Assessment"})]}),(0,a.jsxs)(n.Zp,{className:"mt-6",children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{className:"text-lg",children:"Assessment Overview"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(x.subject_distribution).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[B(s),(0,a.jsx)("span",{className:"text-sm font-medium",children:s.replace("_"," ").toUpperCase()})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-primary",children:t}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"questions"})]},s)})})})]})]})})}},80991:(e,s,t)=>{"use strict";t.d(s,{k:()=>i});var a=t(12115),l=t(9484),r=t(64269);let i=a.forwardRef((e,s)=>{let{className:t,value:i,...n}=e;return a.createElement(l.Root,{ref:s,className:(0,r.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n},a.createElement(l.Indicator,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(i||0),"%)")}}))});i.displayName=l.Root.displayName}},e=>{e.O(0,[8096,6332,7061,8441,7358],()=>e(e.s=39034)),_N_E=e.O()}]);