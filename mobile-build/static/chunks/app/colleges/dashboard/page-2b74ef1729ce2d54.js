(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5774],{12528:(e,s,a)=>{"use strict";a.d(s,{default:()=>u});var t=a(95155),l=a(12115),i=a(3998),r=a(65142),n=a(76444),c=a(31120),d=a(11186),o=a(86948),h=a(18332),m=a(11647),x=a(13406);function u(e){var s,a;let{initialData:u,onUpdate:j}=e,[p,g]=(0,l.useState)(u||null),[v,f]=(0,l.useState)(!u),[N,b]=(0,l.useState)(!1),[y,w]=(0,l.useState)(null),[C,A]=(0,l.useState)(null),[S,E]=(0,l.useState)("basic"),[_,k]=(0,l.useState)("");(0,l.useEffect)(()=>{u||F()},[u]);let F=async()=>{try{f(!0),w(null);let e=await fetch("/api/colleges/manage"),s=await e.json();if(!e.ok)throw Error(s.details||s.error||"Failed to load college data");g(s.college)}catch(e){console.error("Error loading college data:",e),w(e instanceof Error?e.message:"Failed to load college data")}finally{f(!1)}},T=(e,s)=>{p&&(g(a=>a?{...a,[e]:s}:null),w(null),A(null))},L=(e,s)=>{p&&(g(a=>a?{...a,location:{...a.location,[e]:s}}:null),w(null),A(null))},P=()=>{if(!p||!_.trim())return;let e=p.accreditation||[];e.includes(_.trim())||(g(s=>s?{...s,accreditation:[...e,_.trim()]}:null),k(""))},D=async()=>{if(p){b(!0),w(null),A(null);try{let e=await fetch("/api/colleges/manage",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p.name,type:p.type,location:p.location,address:p.address,website:p.website,phone:p.phone,email:p.email,established_year:p.established_year,accreditation:p.accreditation,about:p.about,admission_criteria:p.admission_criteria,scholarships:p.scholarships,entrance_tests:p.entrance_tests,fee_structure:p.fee_structure,gallery:p.gallery})}),s=await e.json();if(!e.ok)throw Error(s.details||s.error||"Failed to update college profile");g(s.college),A("College profile updated successfully!"),j&&j(s.college)}catch(e){console.error("Update error:",e),w(e instanceof Error?e.message:"Failed to update college profile")}finally{b(!1)}}};return v?(0,t.jsx)(o.Zp,{className:"w-full max-w-4xl mx-auto",children:(0,t.jsx)(o.Wu,{className:"pt-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading college profile..."})]})})})}):p?(0,t.jsxs)(o.Zp,{className:"w-full max-w-4xl mx-auto",children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsx)(o.ZB,{children:"Manage College Profile"}),(0,t.jsx)(o.BT,{children:"Update your college information and settings"}),p.slug&&(0,t.jsxs)("div",{className:"text-sm text-blue-600",children:["Profile URL:"," ",(0,t.jsxs)("a",{href:"/colleges/".concat(p.slug),target:"_blank",rel:"noopener noreferrer",className:"underline",children:["/colleges/",p.slug]})]})]}),(0,t.jsxs)(o.Wu,{children:[y&&(0,t.jsx)(h.Alert,{className:"border-red-200 bg-red-50 mb-6",children:(0,t.jsx)(h.AlertDescription,{className:"text-red-800",children:y})}),C&&(0,t.jsx)(h.Alert,{className:"border-green-200 bg-green-50 mb-6",children:(0,t.jsx)(h.AlertDescription,{className:"text-green-800",children:C})}),(0,t.jsxs)(x.Tabs,{value:S,onValueChange:E,children:[(0,t.jsxs)(x.TabsList,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(x.TabsTrigger,{value:"basic",children:"Basic Info"}),(0,t.jsx)(x.TabsTrigger,{value:"contact",children:"Contact"}),(0,t.jsx)(x.TabsTrigger,{value:"details",children:"Details"}),(0,t.jsx)(x.TabsTrigger,{value:"advanced",children:"Advanced"})]}),(0,t.jsxs)(x.TabsContent,{value:"basic",className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"name",children:"College Name"}),(0,t.jsx)(r.p,{id:"name",value:p.name,onChange:e=>T("name",e.target.value),placeholder:"Enter college name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"type",children:"College Type"}),(0,t.jsxs)(d.Select,{value:p.type,onValueChange:e=>T("type",e),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{placeholder:"Select college type"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"government",children:"Government"}),(0,t.jsx)(d.SelectItem,{value:"government_aided",children:"Government Aided"}),(0,t.jsx)(d.SelectItem,{value:"private",children:"Private"}),(0,t.jsx)(d.SelectItem,{value:"deemed",children:"Deemed University"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"city",children:"City"}),(0,t.jsx)(r.p,{id:"city",value:p.location.city,onChange:e=>L("city",e.target.value),placeholder:"Enter city"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"state",children:"State"}),(0,t.jsx)(r.p,{id:"state",value:p.location.state,onChange:e=>L("state",e.target.value),placeholder:"Enter state"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"address",children:"Full Address"}),(0,t.jsx)(c.T,{id:"address",value:p.address,onChange:e=>T("address",e.target.value),placeholder:"Enter complete address"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"about",children:"About College"}),(0,t.jsx)(c.T,{id:"about",value:p.about||"",onChange:e=>T("about",e.target.value),placeholder:"Describe your college...",rows:4})]})]}),(0,t.jsxs)(x.TabsContent,{value:"contact",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"website",children:"Website"}),(0,t.jsx)(r.p,{id:"website",type:"url",value:p.website||"",onChange:e=>T("website",e.target.value),placeholder:"https://www.example.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"phone",children:"Phone"}),(0,t.jsx)(r.p,{id:"phone",value:p.phone||"",onChange:e=>T("phone",e.target.value),placeholder:"Enter phone number"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"email",children:"Email"}),(0,t.jsx)(r.p,{id:"email",type:"email",value:p.email||"",onChange:e=>T("email",e.target.value),placeholder:"Enter email address"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"established_year",children:"Established Year"}),(0,t.jsx)(r.p,{id:"established_year",type:"number",min:"1800",max:new Date().getFullYear(),value:p.established_year||"",onChange:e=>T("established_year",e.target.value?parseInt(e.target.value):0),placeholder:"Enter year"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"})]}),(0,t.jsxs)(x.TabsContent,{value:"details",className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{children:"Accreditations"}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,t.jsx)(r.p,{value:_,onChange:e=>k(e.target.value),placeholder:"Enter accreditation (e.g., NAAC A+)",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),P())}),(0,t.jsx)(i.$,{type:"button",onClick:P,variant:"outline",children:"Add"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(p.accreditation||[]).map((e,s)=>(0,t.jsxs)(m.E,{variant:"secondary",className:"cursor-pointer",onClick:()=>(e=>{if(!p)return;let s=p.accreditation||[];g(a=>a?{...a,accreditation:s.filter((s,a)=>a!==e)}:null)})(s),children:[e," \xd7"]},s))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{children:"Total Courses"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==(s=p.courses)?void 0:s.length)||0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{children:"Total Notices"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==(a=p.notices)?void 0:a.length)||0})]})]}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Advanced features like admission criteria, scholarships, entrance tests, and fee structure management will be available in future updates."})})]}),(0,t.jsxs)(x.TabsContent,{value:"advanced",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{children:"Verification Status"}),(0,t.jsx)(m.E,{variant:p.is_verified?"default":"secondary",children:p.is_verified?"Verified":"Pending Verification"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{children:"Profile Status"}),(0,t.jsx)(m.E,{variant:p.is_active?"default":"destructive",children:p.is_active?"Active":"Inactive"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{children:"Profile Created"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:new Date(p.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{children:"Last Updated"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:new Date(p.updated_at).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Profile URL"}),(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:["Your college profile is accessible at: ",(0,t.jsx)("br",{}),(0,t.jsxs)("code",{className:"bg-white px-2 py-1 rounded",children:["/colleges/",p.slug]})]})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-6 border-t",children:(0,t.jsx)(i.$,{onClick:D,disabled:N,children:N?"Updating...":"Update Profile"})})]})]}):(0,t.jsx)(o.Zp,{className:"w-full max-w-4xl mx-auto",children:(0,t.jsx)(o.Wu,{className:"pt-6",children:(0,t.jsx)(h.Alert,{className:"border-red-200 bg-red-50",children:(0,t.jsx)(h.AlertDescription,{className:"text-red-800",children:y||"No college profile found. Please register your college first."})})})})}},51834:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>m,L3:()=>u,c7:()=>x,lG:()=>c,rr:()=>j,zM:()=>d});var t=a(95155),l=a(12115),i=a(89511),r=a(65229),n=a(64269);let c=i.bL,d=i.l9,o=i.ZL;i.bm;let h=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(i.hJ,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});h.displayName=i.hJ.displayName;let m=l.forwardRef((e,s)=>{let{className:a,children:l,...c}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(h,{}),(0,t.jsxs)(i.UC,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[l,(0,t.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(r.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=i.UC.displayName;let x=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};x.displayName="DialogHeader";let u=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(i.hE,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});u.displayName=i.hE.displayName;let j=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(i.VY,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...l})});j.displayName=i.VY.displayName},59957:(e,s,a)=>{"use strict";a.d(s,{default:()=>f});var t=a(95155),l=a(12115),i=a(3998),r=a(86948),n=a(65142),c=a(76444),d=a(31120),o=a(11186),h=a(51834),m=a(11647),x=a(6132),u=a(16485),j=a(6191),p=a(11010),g=a(71360);let v={title:"",content:"",type:"general",expires_at:""};function f(e){let{collegeId:s}=e,[a,f]=(0,l.useState)([]),[N,b]=(0,l.useState)(!0),[y,w]=(0,l.useState)(!1),[C,A]=(0,l.useState)(v),[S,E]=(0,l.useState)(null),[_,k]=(0,l.useState)(!1),[F,T]=(0,l.useState)(null),L=(0,l.useCallback)(async()=>{try{b(!0);let e=await fetch("/api/colleges/admin/notices?college_id=".concat(s));if(!e.ok)throw Error("Failed to fetch notices");let a=await e.json();f(a.notices||[])}catch(e){console.error("Error fetching notices:",e),T("Failed to load notices")}finally{b(!1)}},[s]);(0,l.useEffect)(()=>{L()},[L]);let P=async e=>{e.preventDefault(),w(!0),T(null);try{let e=S?"/api/colleges/admin/notices/".concat(S.id):"/api/colleges/admin/notices",s=S?"PUT":"POST",a=await fetch(e,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,expires_at:C.expires_at||null})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to save notice")}await L(),A(v),E(null),k(!1)}catch(e){console.error("Error saving notice:",e),T(e instanceof Error?e.message:"Failed to save notice")}finally{w(!1)}},D=async e=>{if(confirm("Are you sure you want to delete this notice?"))try{if(!(await fetch("/api/colleges/admin/notices/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete notice");await L()}catch(e){console.error("Error deleting notice:",e),T("Failed to delete notice")}},$=async e=>{try{if(!(await fetch("/api/colleges/admin/notices/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!e.is_active})})).ok)throw Error("Failed to update notice status");await L()}catch(e){console.error("Error updating notice status:",e),T("Failed to update notice status")}},I=e=>!!e&&new Date(e)<new Date,U=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return N?(0,t.jsxs)(r.Zp,{children:[(0,t.jsx)(r.aR,{children:(0,t.jsx)(r.ZB,{children:"College Notices"})}),(0,t.jsx)(r.Wu,{children:(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading notices..."})})})]}):(0,t.jsxs)(r.Zp,{children:[(0,t.jsxs)(r.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(r.ZB,{children:"College Notices"}),(0,t.jsxs)(h.lG,{open:_,onOpenChange:k,children:[(0,t.jsx)(h.zM,{asChild:!0,children:(0,t.jsxs)(i.$,{onClick:()=>{E(null),A(v),T(null)},children:[(0,t.jsx)(j.A,{className:"w-4 h-4 mr-2"}),"Add Notice"]})}),(0,t.jsxs)(h.Cf,{className:"max-w-2xl",children:[(0,t.jsx)(h.c7,{children:(0,t.jsx)(h.L3,{children:S?"Edit Notice":"Add New Notice"})}),(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"title",children:"Title *"}),(0,t.jsx)(n.p,{id:"title",value:C.title,onChange:e=>A({...C,title:e.target.value}),placeholder:"Enter notice title",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"content",children:"Content *"}),(0,t.jsx)(d.T,{id:"content",value:C.content,onChange:e=>A({...C,content:e.target.value}),placeholder:"Enter notice content",rows:4,required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"type",children:"Type"}),(0,t.jsxs)(o.Select,{value:C.type,onValueChange:e=>A({...C,type:e}),children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"general",children:"General"}),(0,t.jsx)(o.SelectItem,{value:"admission",children:"Admission"}),(0,t.jsx)(o.SelectItem,{value:"event",children:"Event"}),(0,t.jsx)(o.SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"expires_at",children:"Expires On (Optional)"}),(0,t.jsx)(n.p,{id:"expires_at",type:"date",value:C.expires_at,onChange:e=>A({...C,expires_at:e.target.value})})]})]}),F&&(0,t.jsx)("div",{className:"text-red-600 text-sm",children:F}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,t.jsx)(i.$,{type:"submit",disabled:y,children:y?"Saving...":S?"Update":"Create"})]})]})]})]})]}),(0,t.jsxs)(r.Wu,{children:[F&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700",children:F}),0===a.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No notices found. Create your first notice to get started."}):(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,t.jsx)("div",{className:"border rounded-lg p-4 ".concat(!e.is_active?"opacity-60 bg-gray-50":""," ").concat(I(e.expires_at||null)?"border-red-200 bg-red-50":""),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,t.jsxs)(m.E,{className:"".concat((e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"admission":return"bg-blue-100 text-blue-800";case"event":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.type)," flex items-center gap-1"),children:[(e=>{switch(e){case"urgent":return(0,t.jsx)(x.A,{className:"w-4 h-4"});case"event":return(0,t.jsx)(u.A,{className:"w-4 h-4"});default:return null}})(e.type),e.type.charAt(0).toUpperCase()+e.type.slice(1)]}),!e.is_active&&(0,t.jsx)(m.E,{variant:"secondary",children:"Inactive"}),I(e.expires_at||null)&&(0,t.jsx)(m.E,{variant:"destructive",children:"Expired"})]}),(0,t.jsx)("p",{className:"text-gray-700 mb-3",children:e.content}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,t.jsxs)("div",{children:["Published: ",U(e.published_at)]}),e.expires_at&&(0,t.jsxs)("div",{children:["Expires: ",U(e.expires_at)]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,t.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>$(e),children:e.is_active?"Deactivate":"Activate"}),(0,t.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{E(e),A({title:e.title,content:e.content,type:e.type,expires_at:e.expires_at?e.expires_at.split("T")[0]:""}),k(!0)},children:(0,t.jsx)(p.A,{className:"w-4 h-4"})}),(0,t.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>D(e.id),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(g.A,{className:"w-4 h-4"})})]})]})},e.id))})]})]})}},83296:(e,s,a)=>{"use strict";a.d(s,{default:()=>w});var t=a(95155),l=a(12115),i=a(3998),r=a(65142),n=a(76444),c=a(31120),d=a(86948),o=a(18332),h=a(11647),m=a(51834),x=a(47937),u=a(6191),j=a(6132),p=a(42529),g=a(26983),v=a(91169),f=a(91761),N=a(11010),b=a(71360);let y={name:"",description:"",duration:"",eligibility:"",fees:{tuition:"",other:"",total:""},seats:""};function w(e){let{collegeName:s}=e,[a,w]=(0,l.useState)([]),[C,A]=(0,l.useState)(!0),[S,E]=(0,l.useState)(null),[_,k]=(0,l.useState)(null),[F,T]=(0,l.useState)(!1),[L,P]=(0,l.useState)(null),[D,$]=(0,l.useState)(y),[I,U]=(0,l.useState)(!1);(0,l.useEffect)(()=>{Z()},[]);let Z=async()=>{try{A(!0),E(null);let e=await fetch("/api/colleges/admin/courses"),s=await e.json();if(!e.ok)throw Error(s.details||s.error||"Failed to load courses");w(s.courses||[])}catch(e){console.error("Error loading courses:",e),E(e instanceof Error?e.message:"Failed to load courses")}finally{A(!1)}},z=(e,s)=>{$(a=>({...a,[e]:s}))},R=(e,s)=>{let a=""===s?"":parseFloat(s);$(s=>({...s,fees:{...s.fees,[e]:a}}))},B=()=>{P(null),$(y),T(!0),E(null),k(null)},O=async e=>{if(e.preventDefault(),!D.name.trim())return void E("Course name is required");U(!0),E(null),k(null);try{let e,s={name:D.name.trim(),description:D.description.trim()||null,duration:D.duration.trim()||null,eligibility:D.eligibility.trim()||null,fees:{tuition:""===D.fees.tuition?null:Number(D.fees.tuition),other:""===D.fees.other?null:Number(D.fees.other),total:""===D.fees.total?null:Number(D.fees.total)},seats:""===D.seats?null:Number(D.seats)};e=L?await fetch("/api/colleges/admin/courses/".concat(L.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("/api/colleges/admin/courses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});let a=await e.json();if(!e.ok)throw Error(a.details||a.error||"Failed to save course");k(L?"Course updated successfully!":"Course created successfully!"),T(!1),$(y),P(null),await Z()}catch(e){console.error("Error saving course:",e),E(e instanceof Error?e.message:"Failed to save course")}finally{U(!1)}},V=async e=>{if(confirm('Are you sure you want to delete the course "'.concat(e.name,'"? This action cannot be undone.')))try{E(null),k(null);let s=await fetch("/api/colleges/admin/courses/".concat(e.id),{method:"DELETE"}),a=await s.json();if(!s.ok)throw Error(a.details||a.error||"Failed to delete course");k("Course deleted successfully!"),await Z()}catch(e){console.error("Error deleting course:",e),E(e instanceof Error?e.message:"Failed to delete course")}};return C?(0,t.jsx)(d.Zp,{children:(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading courses..."})]})})})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(d.Zp,{children:(0,t.jsx)(d.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(d.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(x.A,{className:"h-5 w-5"}),"Course Management"]}),(0,t.jsxs)(d.BT,{children:["Manage courses offered by ",s]})]}),(0,t.jsxs)(i.$,{onClick:B,children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Add Course"]})]})})}),S&&(0,t.jsxs)(o.Alert,{className:"border-red-200 bg-red-50",children:[(0,t.jsx)(j.A,{className:"h-4 w-4"}),(0,t.jsx)(o.AlertDescription,{className:"text-red-800",children:S})]}),_&&(0,t.jsxs)(o.Alert,{className:"border-green-200 bg-green-50",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)(o.AlertDescription,{className:"text-green-800",children:_})]}),0===a.length?(0,t.jsx)(d.Zp,{children:(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(x.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No courses yet"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Start by adding your first course offering."}),(0,t.jsxs)(i.$,{onClick:B,children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Add Your First Course"]})]})})}):(0,t.jsx)("div",{className:"grid gap-4",children:a.map(e=>{var s;return(0,t.jsx)(d.Zp,{className:e.is_active?"":"opacity-60",children:(0,t.jsx)(d.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,t.jsx)(h.E,{variant:e.is_active?"default":"secondary",children:e.is_active?"Active":"Inactive"})]}),e.description&&(0,t.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.duration&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{children:["Duration: ",e.duration]})]}),e.seats&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{children:["Seats: ",e.seats]})]}),(null==(s=e.fees)?void 0:s.total)&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{children:["Fee: ₹",e.fees.total.toLocaleString()]})]})]}),e.eligibility&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("strong",{children:"Eligibility:"})," ",e.eligibility]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,t.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>{var s,a,t;P(e),$({name:e.name,description:e.description||"",duration:e.duration||"",eligibility:e.eligibility||"",fees:{tuition:(null==(s=e.fees)?void 0:s.tuition)||"",other:(null==(a=e.fees)?void 0:a.other)||"",total:(null==(t=e.fees)?void 0:t.total)||""},seats:e.seats||""}),T(!0),E(null),k(null)},children:(0,t.jsx)(N.A,{className:"h-4 w-4"})}),(0,t.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>V(e),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(b.A,{className:"h-4 w-4"})})]})]})})},e.id)})}),(0,t.jsx)(m.lG,{open:F,onOpenChange:T,children:(0,t.jsxs)(m.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(m.c7,{children:[(0,t.jsx)(m.L3,{children:L?"Edit Course":"Add New Course"}),(0,t.jsx)(m.rr,{children:L?"Update the course information below.":"Fill in the details for the new course."})]}),S&&(0,t.jsxs)(o.Alert,{className:"border-red-200 bg-red-50",children:[(0,t.jsx)(j.A,{className:"h-4 w-4"}),(0,t.jsx)(o.AlertDescription,{className:"text-red-800",children:S})]}),(0,t.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"name",children:"Course Name *"}),(0,t.jsx)(r.p,{id:"name",value:D.name,onChange:e=>z("name",e.target.value),placeholder:"e.g., Bachelor of Computer Applications",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)(c.T,{id:"description",value:D.description,onChange:e=>z("description",e.target.value),placeholder:"Brief description of the course...",rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"duration",children:"Duration"}),(0,t.jsx)(r.p,{id:"duration",value:D.duration,onChange:e=>z("duration",e.target.value),placeholder:"e.g., 3 Years"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"seats",children:"Number of Seats"}),(0,t.jsx)(r.p,{id:"seats",type:"number",min:"1",value:D.seats,onChange:e=>z("seats",e.target.value),placeholder:"e.g., 60"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"eligibility",children:"Eligibility Criteria"}),(0,t.jsx)(c.T,{id:"eligibility",value:D.eligibility,onChange:e=>z("eligibility",e.target.value),placeholder:"e.g., 12th pass with minimum 50% marks",rows:2})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(n.Label,{children:"Fee Structure (₹)"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"tuition",className:"text-sm",children:"Tuition Fee"}),(0,t.jsx)(r.p,{id:"tuition",type:"number",min:"0",value:D.fees.tuition,onChange:e=>R("tuition",e.target.value),placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"other",className:"text-sm",children:"Other Fees"}),(0,t.jsx)(r.p,{id:"other",type:"number",min:"0",value:D.fees.other,onChange:e=>R("other",e.target.value),placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Label,{htmlFor:"total",className:"text-sm",children:"Total Fee"}),(0,t.jsx)(r.p,{id:"total",type:"number",min:"0",value:D.fees.total,onChange:e=>R("total",e.target.value),placeholder:"0"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>T(!1),disabled:I,children:"Cancel"}),(0,t.jsx)(i.$,{type:"submit",disabled:I,children:I?L?"Updating...":"Creating...":L?"Update Course":"Create Course"})]})]})]})})]})}},84928:(e,s,a)=>{"use strict";a.d(s,{CollegeNotifications:()=>g});var t=a(95155),l=a(12115),i=a(65523),r=a(11647),n=a(96583),c=a(89715),d=a(26983),o=a(42529),h=a(6132),m=a(85998),x=a(35299),u=a(89559),j=a(91169),p=a(57828);function g(e){let{userId:s}=e,[a,g]=(0,l.useState)([]),[v,f]=(0,l.useState)(!0),[N,b]=(0,l.useState)(null),[y,w]=(0,l.useState)(null),C=async()=>{try{f(!0),b(null);let e=await fetch("/api/colleges/notifications");if(!e.ok)throw Error("Failed to fetch notifications");let s=await e.json();if(s.success)g(s.data);else throw Error(s.error||"Failed to fetch notifications")}catch(e){console.error("Error fetching notifications:",e),b(e instanceof Error?e.message:"Failed to fetch notifications")}finally{f(!1)}};(0,l.useEffect)(()=>{s&&C()},[s]);let A=async e=>{try{if(w(e),!(await fetch("/api/colleges/notifications/".concat(e,"/read"),{method:"PUT"})).ok)throw Error("Failed to mark notification as read");g(s=>s.map(s=>s.id===e?{...s,is_read:!0}:s))}catch(e){console.error("Error marking notification as read:",e)}finally{w(null)}},S=a.filter(e=>!e.is_read).length;return v?(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"College Notifications"]}),(0,t.jsx)(i.BT,{children:"Stay updated on student applications"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(x.A,{className:"h-6 w-6 animate-spin mr-2"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading notifications..."})]})})]}):N?(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"College Notifications"]}),(0,t.jsx)(i.BT,{children:"Stay updated on student applications"})]}),(0,t.jsx)(i.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(h.A,{className:"h-6 w-6 text-red-500 mr-2"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-red-500 mb-2",children:N}),(0,t.jsxs)(i.$n,{variant:"outline",size:"sm",onClick:C,className:"flex items-center",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Retry"]})]})]})})]}):(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"College Notifications",S>0&&(0,t.jsx)(r.E,{variant:"destructive",className:"ml-2",children:S})]}),(0,t.jsxs)(i.$n,{variant:"outline",size:"sm",onClick:C,className:"flex items-center",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),(0,t.jsx)(i.BT,{children:"Stay updated on student applications and important college updates"})]}),(0,t.jsx)(i.Wu,{children:0===a.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(j.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"No notifications yet"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"You'll receive updates about student applications here"})]}):(0,t.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-3 transition-all ".concat(e.is_read?"bg-gray-50 border-gray-200":"bg-white border-blue-200 shadow-sm"),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{let s=e.data;if((null==s?void 0:s.action)==="new_application")return(0,t.jsx)(n.A,{className:"h-4 w-4 text-blue-600"});if((null==s?void 0:s.action)==="document_updated")return(0,t.jsx)(c.A,{className:"h-4 w-4 text-orange-600"});switch(e.type){case"admission_deadline":return(0,t.jsx)(d.A,{className:"h-4 w-4 text-orange-600"});case"scholarship":return(0,t.jsx)(o.A,{className:"h-4 w-4 text-green-600"});case"exam_reminder":return(0,t.jsx)(h.A,{className:"h-4 w-4 text-blue-600"});default:return(0,t.jsx)(m.A,{className:"h-4 w-4 text-gray-600"})}})(e),(0,t.jsx)("h4",{className:"font-medium text-sm ".concat(e.is_read?"text-gray-700":"text-gray-900"),children:e.title}),(e=>{let s=e.data;if((null==s?void 0:s.action)==="new_application")return(0,t.jsx)(r.E,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"New Application"});if((null==s?void 0:s.action)==="document_updated")return(0,t.jsx)(r.E,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Documents Updated"});switch(e.type){case"admission_deadline":return(0,t.jsx)(r.E,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Deadline"});case"scholarship":return(0,t.jsx)(r.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Scholarship"});case"exam_reminder":return(0,t.jsx)(r.E,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Exam"});default:return(0,t.jsx)(r.E,{variant:"secondary",children:"General"})}})(e),!e.is_read&&(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]}),!e.is_read&&(0,t.jsx)(i.$n,{variant:"ghost",size:"sm",onClick:()=>A(e.id),disabled:y===e.id,className:"h-6 w-6 p-0",children:y===e.id?(0,t.jsx)(x.A,{className:"h-3 w-3 animate-spin"}):(0,t.jsx)(p.A,{className:"h-3 w-3"})})]}),(0,t.jsx)("p",{className:"text-sm mb-2 ".concat(e.is_read?"text-gray-600":"text-gray-800"),children:e.message}),e.data&&e.data.student_name&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:[(0,t.jsx)("strong",{children:"Student:"})," ",e.data.student_name,e.data.student_email&&(0,t.jsxs)("span",{children:[" ","(",e.data.student_email,")"]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.sent_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},e.id))})})]})}},90775:(e,s,a)=>{"use strict";a.d(s,{default:()=>A});var t=a(95155),l=a(12115),i=a(86948),r=a(3998),n=a(11647),c=a(65142),d=a(11186),o=a(31120),h=a(42529),m=a(78874),x=a(26983),u=a(90368),j=a(20508),p=a(23664),g=a(69141),v=a(89442),f=a(16485),N=a(89715),b=a(57828),y=a(86651),w=a(27937),C=a(64662);function A(e){let{collegeName:s}=e,[a,A]=(0,l.useState)([]),[S,E]=(0,l.useState)(!0),[_,k]=(0,l.useState)(null),[F,T]=(0,l.useState)("all"),[L,P]=(0,l.useState)(""),[D,$]=(0,l.useState)(1),[I,U]=(0,l.useState)(1),[Z,z]=(0,l.useState)(0),[R,B]=(0,l.useState)(null),[O,V]=(0,l.useState)(""),W=(0,l.useCallback)(async()=>{try{E(!0);let e=new URLSearchParams({page:D.toString(),limit:"10",..."all"!==F&&{status:F},...L&&{search:L}}),s=await fetch("/api/colleges/admin/applications?".concat(e));if(!s.ok)throw Error("Failed to fetch applications");let a=await s.json();A(a.applications),U(a.pagination.totalPages),z(a.pagination.total)}catch(e){console.error("Error fetching applications:",e)}finally{E(!1)}},[D,F,L]);(0,l.useEffect)(()=>{W()},[W]);let G=async(e,s)=>{try{B(e);let a=await fetch("/api/colleges/admin/applications/".concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,feedback:O.trim()||void 0})});if(!a.ok)throw Error("Failed to update application status");await a.json(),A(a=>a.map(a=>a.id===e?{...a,status:s,feedback:O.trim()||void 0,reviewed_at:new Date().toISOString()}:a)),(null==_?void 0:_.id)===e&&k(e=>e?{...e,status:s,feedback:O.trim()||void 0,reviewed_at:new Date().toISOString()}:null),V("")}catch(e){console.error("Error updating application status:",e),alert("Failed to update application status. Please try again.")}finally{B(null)}},M=e=>{switch(e){case"approved":return(0,t.jsxs)(n.E,{className:"bg-green-100 text-green-800",children:[(0,t.jsx)(h.A,{className:"h-3 w-3 mr-1"}),"Approved"]});case"rejected":return(0,t.jsxs)(n.E,{className:"bg-red-100 text-red-800",children:[(0,t.jsx)(m.A,{className:"h-3 w-3 mr-1"}),"Rejected"]});default:return(0,t.jsxs)(n.E,{className:"bg-yellow-100 text-yellow-800",children:[(0,t.jsx)(x.A,{className:"h-3 w-3 mr-1"}),"Pending"]})}},J=e=>{window.open(e,"_blank")};if(_){var Y;return(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.ZB,{className:"flex items-center gap-2",children:(0,t.jsxs)(r.$,{variant:"ghost",size:"sm",onClick:()=>k(null),children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),"Back to Applications"]})}),(0,t.jsxs)(i.BT,{children:["Application Details - ",_.full_name]})]}),M(_.status)]})}),(0,t.jsxs)(i.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-5 w-5"}),"Student Information"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Name:"}),(0,t.jsx)("span",{children:_.full_name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:_.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:_.phone})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:_.class_stream})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Applied:"," ",(0,C.GP)(new Date(_.submitted_at),"PPP")]})]}),_.reviewed_at&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Reviewed:"," ",(0,C.GP)(new Date(_.reviewed_at),"PPP")]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-5 w-5"}),"Documents"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[_.documents.marksheet_10th&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,t.jsx)("span",{children:"10th Marksheet"}),(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>J(_.documents.marksheet_10th),children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"View"]})]}),_.documents.marksheet_12th&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,t.jsx)("span",{children:"12th Marksheet"}),(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>J(_.documents.marksheet_12th),children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"View"]})]}),null==(Y=_.documents.other_documents)?void 0:Y.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,t.jsxs)("span",{children:["Other Document ",s+1]}),(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>J(e),children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"View"]})]},s))]})]})]}),_.feedback&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Previous Feedback"}),(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded border",children:_.feedback})]}),"pending"===_.status&&(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Review Application"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Feedback (Optional)"}),(0,t.jsx)(o.T,{value:O,onChange:e=>V(e.target.value),placeholder:"Provide feedback to the student...",rows:3})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(r.$,{onClick:()=>G(_.id,"approved"),disabled:R===_.id,className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Approve Application"]}),(0,t.jsxs)(r.$,{onClick:()=>G(_.id,"rejected"),disabled:R===_.id,variant:"destructive",children:[(0,t.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Reject Application"]})]})]})]})]})]})}return(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsx)(i.ZB,{children:"Student Applications"}),(0,t.jsxs)(i.BT,{children:["Manage applications to ",s," (",Z," total)"]})]}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(c.p,{placeholder:"Search by name, email, or phone...",value:L,onChange:e=>P(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(d.Select,{value:F,onValueChange:T,children:[(0,t.jsx)(d.SelectTrigger,{className:"w-full sm:w-48",children:(0,t.jsx)(d.SelectValue,{placeholder:"Filter by status"})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"all",children:"All Applications"}),(0,t.jsx)(d.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(d.SelectItem,{value:"approved",children:"Approved"}),(0,t.jsx)(d.SelectItem,{value:"rejected",children:"Rejected"})]})]})]}),S?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading applications..."})]}):0===a.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-600",children:"No applications found."})}):(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,t.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.full_name}),M(e.status)]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(p.A,{className:"h-3 w-3"}),e.email]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(g.A,{className:"h-3 w-3"}),e.phone]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(v.A,{className:"h-3 w-3"}),e.class_stream]})]}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Applied:"," ",(0,C.GP)(new Date(e.submitted_at),"PPP")]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.$,{size:"sm",onClick:()=>G(e.id,"approved"),disabled:R===e.id,className:"bg-green-600 hover:bg-green-700",children:(0,t.jsx)(h.A,{className:"h-4 w-4"})}),(0,t.jsx)(r.$,{size:"sm",variant:"destructive",onClick:()=>G(e.id,"rejected"),disabled:R===e.id,children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>k(e),children:(0,t.jsx)(b.A,{className:"h-4 w-4"})})]})]})},e.id))}),I>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Page ",D," of ",I]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>$(e=>Math.max(1,e-1)),disabled:1===D,children:[(0,t.jsx)(u.A,{className:"h-4 w-4"}),"Previous"]}),(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>$(e=>Math.min(I,e+1)),disabled:D===I,children:["Next",(0,t.jsx)(w.A,{className:"h-4 w-4"})]})]})]})]})]})}},93713:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,52619,23)),Promise.resolve().then(a.bind(a,90775)),Promise.resolve().then(a.bind(a,83296)),Promise.resolve().then(a.bind(a,59957)),Promise.resolve().then(a.bind(a,84928)),Promise.resolve().then(a.bind(a,12528)),Promise.resolve().then(a.bind(a,13406))}},e=>{e.O(0,[8096,6332,7061,6867,5523,8441,7358],()=>e(e.s=93713)),_N_E=e.O()}]);