(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5774],{50732:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eo});var t=a(95155),l=a(47061),i=a(12115),r=a(3998),n=a(65142),c=a(76444),d=a(31120),o=a(11186),x=a(86948),m=a(18332),h=a(11647),u=a(13406);function j(e){var s,a;let{initialData:l,onUpdate:j}=e,[p,g]=(0,i.useState)(l||null),[f,v]=(0,i.useState)(!l),[N,b]=(0,i.useState)(!1),[y,w]=(0,i.useState)(null),[A,C]=(0,i.useState)(null),[_,S]=(0,i.useState)("basic"),[E,k]=(0,i.useState)("");(0,i.useEffect)(()=>{l||T()},[l]);let T=async()=>{try{v(!0),w(null);let e=await fetch("/api/colleges/manage"),s=await e.json();if(!e.ok)throw Error(s.details||s.error||"Failed to load college data");g(s.college)}catch(e){console.error("Error loading college data:",e),w(e instanceof Error?e.message:"Failed to load college data")}finally{v(!1)}},F=(e,s)=>{p&&(g(a=>a?{...a,[e]:s}:null),w(null),C(null))},L=(e,s)=>{p&&(g(a=>a?{...a,location:{...a.location,[e]:s}}:null),w(null),C(null))},P=()=>{if(!p||!E.trim())return;let e=p.accreditation||[];e.includes(E.trim())||(g(s=>s?{...s,accreditation:[...e,E.trim()]}:null),k(""))},D=async()=>{if(p){b(!0),w(null),C(null);try{let e=await fetch("/api/colleges/manage",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p.name,type:p.type,location:p.location,address:p.address,website:p.website,phone:p.phone,email:p.email,established_year:p.established_year,accreditation:p.accreditation,about:p.about,admission_criteria:p.admission_criteria,scholarships:p.scholarships,entrance_tests:p.entrance_tests,fee_structure:p.fee_structure,gallery:p.gallery})}),s=await e.json();if(!e.ok)throw Error(s.details||s.error||"Failed to update college profile");g(s.college),C("College profile updated successfully!"),j&&j(s.college)}catch(e){console.error("Update error:",e),w(e instanceof Error?e.message:"Failed to update college profile")}finally{b(!1)}}};return f?(0,t.jsx)(x.Zp,{className:"w-full max-w-4xl mx-auto",children:(0,t.jsx)(x.Wu,{className:"pt-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading college profile..."})]})})})}):p?(0,t.jsxs)(x.Zp,{className:"w-full max-w-4xl mx-auto",children:[(0,t.jsxs)(x.aR,{children:[(0,t.jsx)(x.ZB,{children:"Manage College Profile"}),(0,t.jsx)(x.BT,{children:"Update your college information and settings"}),p.slug&&(0,t.jsxs)("div",{className:"text-sm text-blue-600",children:["Profile URL:"," ",(0,t.jsxs)("a",{href:"/colleges/".concat(p.slug),target:"_blank",rel:"noopener noreferrer",className:"underline",children:["/colleges/",p.slug]})]})]}),(0,t.jsxs)(x.Wu,{children:[y&&(0,t.jsx)(m.Alert,{className:"border-red-200 bg-red-50 mb-6",children:(0,t.jsx)(m.AlertDescription,{className:"text-red-800",children:y})}),A&&(0,t.jsx)(m.Alert,{className:"border-green-200 bg-green-50 mb-6",children:(0,t.jsx)(m.AlertDescription,{className:"text-green-800",children:A})}),(0,t.jsxs)(u.Tabs,{value:_,onValueChange:S,children:[(0,t.jsxs)(u.TabsList,{className:"grid w-full grid-cols-4",children:[(0,t.jsx)(u.TabsTrigger,{value:"basic",children:"Basic Info"}),(0,t.jsx)(u.TabsTrigger,{value:"contact",children:"Contact"}),(0,t.jsx)(u.TabsTrigger,{value:"details",children:"Details"}),(0,t.jsx)(u.TabsTrigger,{value:"advanced",children:"Advanced"})]}),(0,t.jsxs)(u.TabsContent,{value:"basic",className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"name",children:"College Name"}),(0,t.jsx)(n.p,{id:"name",value:p.name,onChange:e=>F("name",e.target.value),placeholder:"Enter college name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"type",children:"College Type"}),(0,t.jsxs)(o.Select,{value:p.type,onValueChange:e=>F("type",e),children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{placeholder:"Select college type"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"government",children:"Government"}),(0,t.jsx)(o.SelectItem,{value:"government_aided",children:"Government Aided"}),(0,t.jsx)(o.SelectItem,{value:"private",children:"Private"}),(0,t.jsx)(o.SelectItem,{value:"deemed",children:"Deemed University"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"city",children:"City"}),(0,t.jsx)(n.p,{id:"city",value:p.location.city,onChange:e=>L("city",e.target.value),placeholder:"Enter city"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"state",children:"State"}),(0,t.jsx)(n.p,{id:"state",value:p.location.state,onChange:e=>L("state",e.target.value),placeholder:"Enter state"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"address",children:"Full Address"}),(0,t.jsx)(d.T,{id:"address",value:p.address,onChange:e=>F("address",e.target.value),placeholder:"Enter complete address"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"about",children:"About College"}),(0,t.jsx)(d.T,{id:"about",value:p.about||"",onChange:e=>F("about",e.target.value),placeholder:"Describe your college...",rows:4})]})]}),(0,t.jsxs)(u.TabsContent,{value:"contact",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"website",children:"Website"}),(0,t.jsx)(n.p,{id:"website",type:"url",value:p.website||"",onChange:e=>F("website",e.target.value),placeholder:"https://www.example.com"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"phone",children:"Phone"}),(0,t.jsx)(n.p,{id:"phone",value:p.phone||"",onChange:e=>F("phone",e.target.value),placeholder:"Enter phone number"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"email",children:"Email"}),(0,t.jsx)(n.p,{id:"email",type:"email",value:p.email||"",onChange:e=>F("email",e.target.value),placeholder:"Enter email address"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"established_year",children:"Established Year"}),(0,t.jsx)(n.p,{id:"established_year",type:"number",min:"1800",max:new Date().getFullYear(),value:p.established_year||"",onChange:e=>F("established_year",e.target.value?parseInt(e.target.value):0),placeholder:"Enter year"})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"})]}),(0,t.jsxs)(u.TabsContent,{value:"details",className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{children:"Accreditations"}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,t.jsx)(n.p,{value:E,onChange:e=>k(e.target.value),placeholder:"Enter accreditation (e.g., NAAC A+)",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),P())}),(0,t.jsx)(r.$,{type:"button",onClick:P,variant:"outline",children:"Add"})]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(p.accreditation||[]).map((e,s)=>(0,t.jsxs)(h.E,{variant:"secondary",className:"cursor-pointer",onClick:()=>(e=>{if(!p)return;let s=p.accreditation||[];g(a=>a?{...a,accreditation:s.filter((s,a)=>a!==e)}:null)})(s),children:[e," \xd7"]},s))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{children:"Total Courses"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==(s=p.courses)?void 0:s.length)||0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{children:"Total Notices"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==(a=p.notices)?void 0:a.length)||0})]})]}),(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Advanced features like admission criteria, scholarships, entrance tests, and fee structure management will be available in future updates."})})]}),(0,t.jsxs)(u.TabsContent,{value:"advanced",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{children:"Verification Status"}),(0,t.jsx)(h.E,{variant:p.is_verified?"default":"secondary",children:p.is_verified?"Verified":"Pending Verification"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{children:"Profile Status"}),(0,t.jsx)(h.E,{variant:p.is_active?"default":"destructive",children:p.is_active?"Active":"Inactive"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{children:"Profile Created"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:new Date(p.created_at).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{children:"Last Updated"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:new Date(p.updated_at).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Profile URL"}),(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:["Your college profile is accessible at: ",(0,t.jsx)("br",{}),(0,t.jsxs)("code",{className:"bg-white px-2 py-1 rounded",children:["/colleges/",p.slug]})]})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-6 border-t",children:(0,t.jsx)(r.$,{onClick:D,disabled:N,children:N?"Updating...":"Update Profile"})})]})]}):(0,t.jsx)(x.Zp,{className:"w-full max-w-4xl mx-auto",children:(0,t.jsx)(x.Wu,{className:"pt-6",children:(0,t.jsx)(m.Alert,{className:"border-red-200 bg-red-50",children:(0,t.jsx)(m.AlertDescription,{className:"text-red-800",children:y||"No college profile found. Please register your college first."})})})})}var p=a(42529),g=a(78874),f=a(26983),v=a(90368),N=a(20508),b=a(23664),y=a(69141),w=a(89442),A=a(16485),C=a(89715),_=a(57828),S=a(86651),E=a(27937),k=a(64662);function T(e){let{collegeName:s}=e,[a,l]=(0,i.useState)([]),[c,m]=(0,i.useState)(!0),[u,j]=(0,i.useState)(null),[T,F]=(0,i.useState)("all"),[L,P]=(0,i.useState)(""),[D,$]=(0,i.useState)(1),[I,Z]=(0,i.useState)(1),[R,U]=(0,i.useState)(0),[B,z]=(0,i.useState)(null),[O,V]=(0,i.useState)(""),W=(0,i.useCallback)(async()=>{try{m(!0);let e=new URLSearchParams({page:D.toString(),limit:"10",..."all"!==T&&{status:T},...L&&{search:L}}),s=await fetch("/api/colleges/admin/applications?".concat(e));if(!s.ok)throw Error("Failed to fetch applications");let a=await s.json();l(a.applications),Z(a.pagination.totalPages),U(a.pagination.total)}catch(e){console.error("Error fetching applications:",e)}finally{m(!1)}},[D,T,L]);(0,i.useEffect)(()=>{W()},[W]);let M=async(e,s)=>{try{z(e);let a=await fetch("/api/colleges/admin/applications/".concat(e,"/status"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:s,feedback:O.trim()||void 0})});if(!a.ok)throw Error("Failed to update application status");await a.json(),l(a=>a.map(a=>a.id===e?{...a,status:s,feedback:O.trim()||void 0,reviewed_at:new Date().toISOString()}:a)),(null==u?void 0:u.id)===e&&j(e=>e?{...e,status:s,feedback:O.trim()||void 0,reviewed_at:new Date().toISOString()}:null),V("")}catch(e){console.error("Error updating application status:",e),alert("Failed to update application status. Please try again.")}finally{z(null)}},Y=e=>{switch(e){case"approved":return(0,t.jsxs)(h.E,{className:"bg-green-100 text-green-800",children:[(0,t.jsx)(p.A,{className:"h-3 w-3 mr-1"}),"Approved"]});case"rejected":return(0,t.jsxs)(h.E,{className:"bg-red-100 text-red-800",children:[(0,t.jsx)(g.A,{className:"h-3 w-3 mr-1"}),"Rejected"]});default:return(0,t.jsxs)(h.E,{className:"bg-yellow-100 text-yellow-800",children:[(0,t.jsx)(f.A,{className:"h-3 w-3 mr-1"}),"Pending"]})}},J=e=>{window.open(e,"_blank")};if(u){var G;return(0,t.jsxs)(x.Zp,{children:[(0,t.jsx)(x.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(x.ZB,{className:"flex items-center gap-2",children:(0,t.jsxs)(r.$,{variant:"ghost",size:"sm",onClick:()=>j(null),children:[(0,t.jsx)(v.A,{className:"h-4 w-4"}),"Back to Applications"]})}),(0,t.jsxs)(x.BT,{children:["Application Details - ",u.full_name]})]}),Y(u.status)]})}),(0,t.jsxs)(x.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(N.A,{className:"h-5 w-5"}),"Student Information"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:"Name:"}),(0,t.jsx)("span",{children:u.full_name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:u.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:u.phone})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(w.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:u.class_stream})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(A.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Applied:"," ",(0,k.GP)(new Date(u.submitted_at),"PPP")]})]}),u.reviewed_at&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(A.A,{className:"h-4 w-4"}),(0,t.jsxs)("span",{children:["Reviewed:"," ",(0,k.GP)(new Date(u.reviewed_at),"PPP")]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-5 w-5"}),"Documents"]}),(0,t.jsxs)("div",{className:"space-y-2",children:[u.documents.marksheet_10th&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,t.jsx)("span",{children:"10th Marksheet"}),(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>J(u.documents.marksheet_10th),children:[(0,t.jsx)(_.A,{className:"h-4 w-4 mr-1"}),"View"]})]}),u.documents.marksheet_12th&&(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,t.jsx)("span",{children:"12th Marksheet"}),(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>J(u.documents.marksheet_12th),children:[(0,t.jsx)(_.A,{className:"h-4 w-4 mr-1"}),"View"]})]}),null==(G=u.documents.other_documents)?void 0:G.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded",children:[(0,t.jsxs)("span",{children:["Other Document ",s+1]}),(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>J(e),children:[(0,t.jsx)(_.A,{className:"h-4 w-4 mr-1"}),"View"]})]},s))]})]})]}),u.feedback&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Previous Feedback"}),(0,t.jsx)("div",{className:"p-3 bg-gray-50 rounded border",children:u.feedback})]}),"pending"===u.status&&(0,t.jsxs)("div",{className:"space-y-4 border-t pt-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Review Application"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Feedback (Optional)"}),(0,t.jsx)(d.T,{value:O,onChange:e=>V(e.target.value),placeholder:"Provide feedback to the student...",rows:3})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(r.$,{onClick:()=>M(u.id,"approved"),disabled:B===u.id,className:"bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Approve Application"]}),(0,t.jsxs)(r.$,{onClick:()=>M(u.id,"rejected"),disabled:B===u.id,variant:"destructive",children:[(0,t.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Reject Application"]})]})]})]})]})]})}return(0,t.jsxs)(x.Zp,{children:[(0,t.jsxs)(x.aR,{children:[(0,t.jsx)(x.ZB,{children:"Student Applications"}),(0,t.jsxs)(x.BT,{children:["Manage applications to ",s," (",R," total)"]})]}),(0,t.jsxs)(x.Wu,{children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(S.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(n.p,{placeholder:"Search by name, email, or phone...",value:L,onChange:e=>P(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(o.Select,{value:T,onValueChange:F,children:[(0,t.jsx)(o.SelectTrigger,{className:"w-full sm:w-48",children:(0,t.jsx)(o.SelectValue,{placeholder:"Filter by status"})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"all",children:"All Applications"}),(0,t.jsx)(o.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(o.SelectItem,{value:"approved",children:"Approved"}),(0,t.jsx)(o.SelectItem,{value:"rejected",children:"Rejected"})]})]})]}),c?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading applications..."})]}):0===a.length?(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-600",children:"No applications found."})}):(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,t.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.full_name}),Y(e.status)]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(b.A,{className:"h-3 w-3"}),e.email]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(y.A,{className:"h-3 w-3"}),e.phone]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(w.A,{className:"h-3 w-3"}),e.class_stream]})]}),(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Applied:"," ",(0,k.GP)(new Date(e.submitted_at),"PPP")]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===e.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.$,{size:"sm",onClick:()=>M(e.id,"approved"),disabled:B===e.id,className:"bg-green-600 hover:bg-green-700",children:(0,t.jsx)(p.A,{className:"h-4 w-4"})}),(0,t.jsx)(r.$,{size:"sm",variant:"destructive",onClick:()=>M(e.id,"rejected"),disabled:B===e.id,children:(0,t.jsx)(g.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(r.$,{size:"sm",variant:"outline",onClick:()=>j(e),children:(0,t.jsx)(_.A,{className:"h-4 w-4"})})]})]})},e.id))}),I>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Page ",D," of ",I]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>$(e=>Math.max(1,e-1)),disabled:1===D,children:[(0,t.jsx)(v.A,{className:"h-4 w-4"}),"Previous"]}),(0,t.jsxs)(r.$,{size:"sm",variant:"outline",onClick:()=>$(e=>Math.min(I,e+1)),disabled:D===I,children:["Next",(0,t.jsx)(E.A,{className:"h-4 w-4"})]})]})]})]})]})}var F=a(89511),L=a(65229),P=a(64269);let D=F.bL,$=F.l9,I=F.ZL;F.bm;let Z=i.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(F.hJ,{ref:s,className:(0,P.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});Z.displayName=F.hJ.displayName;let R=i.forwardRef((e,s)=>{let{className:a,children:l,...i}=e;return(0,t.jsxs)(I,{children:[(0,t.jsx)(Z,{}),(0,t.jsxs)(F.UC,{ref:s,className:(0,P.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[l,(0,t.jsxs)(F.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(L.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});R.displayName=F.UC.displayName;let U=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,P.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};U.displayName="DialogHeader";let B=i.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(F.hE,{ref:s,className:(0,P.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});B.displayName=F.hE.displayName;let z=i.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(F.VY,{ref:s,className:(0,P.cn)("text-sm text-muted-foreground",a),...l})});z.displayName=F.VY.displayName;var O=a(47937),V=a(6191),W=a(6132),M=a(91169),Y=a(91761),J=a(11010),G=a(71360);let q={name:"",description:"",duration:"",eligibility:"",fees:{tuition:"",other:"",total:""},seats:""};function H(e){let{collegeName:s}=e,[a,l]=(0,i.useState)([]),[o,u]=(0,i.useState)(!0),[j,g]=(0,i.useState)(null),[v,N]=(0,i.useState)(null),[b,y]=(0,i.useState)(!1),[w,A]=(0,i.useState)(null),[C,_]=(0,i.useState)(q),[S,E]=(0,i.useState)(!1);(0,i.useEffect)(()=>{k()},[]);let k=async()=>{try{u(!0),g(null);let e=await fetch("/api/colleges/admin/courses"),s=await e.json();if(!e.ok)throw Error(s.details||s.error||"Failed to load courses");l(s.courses||[])}catch(e){console.error("Error loading courses:",e),g(e instanceof Error?e.message:"Failed to load courses")}finally{u(!1)}},T=(e,s)=>{_(a=>({...a,[e]:s}))},F=(e,s)=>{let a=""===s?"":parseFloat(s);_(s=>({...s,fees:{...s.fees,[e]:a}}))},L=()=>{A(null),_(q),y(!0),g(null),N(null)},P=async e=>{if(e.preventDefault(),!C.name.trim())return void g("Course name is required");E(!0),g(null),N(null);try{let e,s={name:C.name.trim(),description:C.description.trim()||null,duration:C.duration.trim()||null,eligibility:C.eligibility.trim()||null,fees:{tuition:""===C.fees.tuition?null:Number(C.fees.tuition),other:""===C.fees.other?null:Number(C.fees.other),total:""===C.fees.total?null:Number(C.fees.total)},seats:""===C.seats?null:Number(C.seats)};e=w?await fetch("/api/colleges/admin/courses/".concat(w.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("/api/colleges/admin/courses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});let a=await e.json();if(!e.ok)throw Error(a.details||a.error||"Failed to save course");N(w?"Course updated successfully!":"Course created successfully!"),y(!1),_(q),A(null),await k()}catch(e){console.error("Error saving course:",e),g(e instanceof Error?e.message:"Failed to save course")}finally{E(!1)}},$=async e=>{if(confirm('Are you sure you want to delete the course "'.concat(e.name,'"? This action cannot be undone.')))try{g(null),N(null);let s=await fetch("/api/colleges/admin/courses/".concat(e.id),{method:"DELETE"}),a=await s.json();if(!s.ok)throw Error(a.details||a.error||"Failed to delete course");N("Course deleted successfully!"),await k()}catch(e){console.error("Error deleting course:",e),g(e instanceof Error?e.message:"Failed to delete course")}};return o?(0,t.jsx)(x.Zp,{children:(0,t.jsx)(x.Wu,{className:"pt-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading courses..."})]})})})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(x.Zp,{children:(0,t.jsx)(x.aR,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(x.ZB,{className:"flex items-center gap-2",children:[(0,t.jsx)(O.A,{className:"h-5 w-5"}),"Course Management"]}),(0,t.jsxs)(x.BT,{children:["Manage courses offered by ",s]})]}),(0,t.jsxs)(r.$,{onClick:L,children:[(0,t.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Add Course"]})]})})}),j&&(0,t.jsxs)(m.Alert,{className:"border-red-200 bg-red-50",children:[(0,t.jsx)(W.A,{className:"h-4 w-4"}),(0,t.jsx)(m.AlertDescription,{className:"text-red-800",children:j})]}),v&&(0,t.jsxs)(m.Alert,{className:"border-green-200 bg-green-50",children:[(0,t.jsx)(p.A,{className:"h-4 w-4"}),(0,t.jsx)(m.AlertDescription,{className:"text-green-800",children:v})]}),0===a.length?(0,t.jsx)(x.Zp,{children:(0,t.jsx)(x.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(O.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No courses yet"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Start by adding your first course offering."}),(0,t.jsxs)(r.$,{onClick:L,children:[(0,t.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Add Your First Course"]})]})})}):(0,t.jsx)("div",{className:"grid gap-4",children:a.map(e=>{var s;return(0,t.jsx)(x.Zp,{className:e.is_active?"":"opacity-60",children:(0,t.jsx)(x.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,t.jsx)(h.E,{variant:e.is_active?"default":"secondary",children:e.is_active?"Active":"Inactive"})]}),e.description&&(0,t.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.duration&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{children:["Duration: ",e.duration]})]}),e.seats&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{children:["Seats: ",e.seats]})]}),(null==(s=e.fees)?void 0:s.total)&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Y.A,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("span",{children:["Fee: ₹",e.fees.total.toLocaleString()]})]})]}),e.eligibility&&(0,t.jsx)("div",{className:"mt-3",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("strong",{children:"Eligibility:"})," ",e.eligibility]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,t.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>{var s,a,t;A(e),_({name:e.name,description:e.description||"",duration:e.duration||"",eligibility:e.eligibility||"",fees:{tuition:(null==(s=e.fees)?void 0:s.tuition)||"",other:(null==(a=e.fees)?void 0:a.other)||"",total:(null==(t=e.fees)?void 0:t.total)||""},seats:e.seats||""}),y(!0),g(null),N(null)},children:(0,t.jsx)(J.A,{className:"h-4 w-4"})}),(0,t.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>$(e),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(G.A,{className:"h-4 w-4"})})]})]})})},e.id)})}),(0,t.jsx)(D,{open:b,onOpenChange:y,children:(0,t.jsxs)(R,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(U,{children:[(0,t.jsx)(B,{children:w?"Edit Course":"Add New Course"}),(0,t.jsx)(z,{children:w?"Update the course information below.":"Fill in the details for the new course."})]}),j&&(0,t.jsxs)(m.Alert,{className:"border-red-200 bg-red-50",children:[(0,t.jsx)(W.A,{className:"h-4 w-4"}),(0,t.jsx)(m.AlertDescription,{className:"text-red-800",children:j})]}),(0,t.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"name",children:"Course Name *"}),(0,t.jsx)(n.p,{id:"name",value:C.name,onChange:e=>T("name",e.target.value),placeholder:"e.g., Bachelor of Computer Applications",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)(d.T,{id:"description",value:C.description,onChange:e=>T("description",e.target.value),placeholder:"Brief description of the course...",rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"duration",children:"Duration"}),(0,t.jsx)(n.p,{id:"duration",value:C.duration,onChange:e=>T("duration",e.target.value),placeholder:"e.g., 3 Years"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"seats",children:"Number of Seats"}),(0,t.jsx)(n.p,{id:"seats",type:"number",min:"1",value:C.seats,onChange:e=>T("seats",e.target.value),placeholder:"e.g., 60"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"eligibility",children:"Eligibility Criteria"}),(0,t.jsx)(d.T,{id:"eligibility",value:C.eligibility,onChange:e=>T("eligibility",e.target.value),placeholder:"e.g., 12th pass with minimum 50% marks",rows:2})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(c.Label,{children:"Fee Structure (₹)"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"tuition",className:"text-sm",children:"Tuition Fee"}),(0,t.jsx)(n.p,{id:"tuition",type:"number",min:"0",value:C.fees.tuition,onChange:e=>F("tuition",e.target.value),placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"other",className:"text-sm",children:"Other Fees"}),(0,t.jsx)(n.p,{id:"other",type:"number",min:"0",value:C.fees.other,onChange:e=>F("other",e.target.value),placeholder:"0"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"total",className:"text-sm",children:"Total Fee"}),(0,t.jsx)(n.p,{id:"total",type:"number",min:"0",value:C.fees.total,onChange:e=>F("total",e.target.value),placeholder:"0"})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,t.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>y(!1),disabled:S,children:"Cancel"}),(0,t.jsx)(r.$,{type:"submit",disabled:S,children:S?w?"Updating...":"Creating...":w?"Update Course":"Create Course"})]})]})]})})]})}let K={title:"",content:"",type:"general",expires_at:""};function Q(e){let{collegeId:s}=e,[a,l]=(0,i.useState)([]),[m,u]=(0,i.useState)(!0),[j,p]=(0,i.useState)(!1),[g,f]=(0,i.useState)(K),[v,N]=(0,i.useState)(null),[b,y]=(0,i.useState)(!1),[w,C]=(0,i.useState)(null),_=(0,i.useCallback)(async()=>{try{u(!0);let e=await fetch("/api/colleges/admin/notices?college_id=".concat(s));if(!e.ok)throw Error("Failed to fetch notices");let a=await e.json();l(a.notices||[])}catch(e){console.error("Error fetching notices:",e),C("Failed to load notices")}finally{u(!1)}},[s]);(0,i.useEffect)(()=>{_()},[_]);let S=async e=>{e.preventDefault(),p(!0),C(null);try{let e=v?"/api/colleges/admin/notices/".concat(v.id):"/api/colleges/admin/notices",s=v?"PUT":"POST",a=await fetch(e,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify({...g,expires_at:g.expires_at||null})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to save notice")}await _(),f(K),N(null),y(!1)}catch(e){console.error("Error saving notice:",e),C(e instanceof Error?e.message:"Failed to save notice")}finally{p(!1)}},E=async e=>{if(confirm("Are you sure you want to delete this notice?"))try{if(!(await fetch("/api/colleges/admin/notices/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete notice");await _()}catch(e){console.error("Error deleting notice:",e),C("Failed to delete notice")}},k=async e=>{try{if(!(await fetch("/api/colleges/admin/notices/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!e.is_active})})).ok)throw Error("Failed to update notice status");await _()}catch(e){console.error("Error updating notice status:",e),C("Failed to update notice status")}},T=e=>!!e&&new Date(e)<new Date,F=e=>new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return m?(0,t.jsxs)(x.Zp,{children:[(0,t.jsx)(x.aR,{children:(0,t.jsx)(x.ZB,{children:"College Notices"})}),(0,t.jsx)(x.Wu,{children:(0,t.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading notices..."})})})]}):(0,t.jsxs)(x.Zp,{children:[(0,t.jsxs)(x.aR,{className:"flex flex-row items-center justify-between",children:[(0,t.jsx)(x.ZB,{children:"College Notices"}),(0,t.jsxs)(D,{open:b,onOpenChange:y,children:[(0,t.jsx)($,{asChild:!0,children:(0,t.jsxs)(r.$,{onClick:()=>{N(null),f(K),C(null)},children:[(0,t.jsx)(V.A,{className:"w-4 h-4 mr-2"}),"Add Notice"]})}),(0,t.jsxs)(R,{className:"max-w-2xl",children:[(0,t.jsx)(U,{children:(0,t.jsx)(B,{children:v?"Edit Notice":"Add New Notice"})}),(0,t.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"title",children:"Title *"}),(0,t.jsx)(n.p,{id:"title",value:g.title,onChange:e=>f({...g,title:e.target.value}),placeholder:"Enter notice title",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"content",children:"Content *"}),(0,t.jsx)(d.T,{id:"content",value:g.content,onChange:e=>f({...g,content:e.target.value}),placeholder:"Enter notice content",rows:4,required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"type",children:"Type"}),(0,t.jsxs)(o.Select,{value:g.type,onValueChange:e=>f({...g,type:e}),children:[(0,t.jsx)(o.SelectTrigger,{children:(0,t.jsx)(o.SelectValue,{})}),(0,t.jsxs)(o.SelectContent,{children:[(0,t.jsx)(o.SelectItem,{value:"general",children:"General"}),(0,t.jsx)(o.SelectItem,{value:"admission",children:"Admission"}),(0,t.jsx)(o.SelectItem,{value:"event",children:"Event"}),(0,t.jsx)(o.SelectItem,{value:"urgent",children:"Urgent"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.Label,{htmlFor:"expires_at",children:"Expires On (Optional)"}),(0,t.jsx)(n.p,{id:"expires_at",type:"date",value:g.expires_at,onChange:e=>f({...g,expires_at:e.target.value})})]})]}),w&&(0,t.jsx)("div",{className:"text-red-600 text-sm",children:w}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(r.$,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),(0,t.jsx)(r.$,{type:"submit",disabled:j,children:j?"Saving...":v?"Update":"Create"})]})]})]})]})]}),(0,t.jsxs)(x.Wu,{children:[w&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700",children:w}),0===a.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No notices found. Create your first notice to get started."}):(0,t.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,t.jsx)("div",{className:"border rounded-lg p-4 ".concat(!e.is_active?"opacity-60 bg-gray-50":""," ").concat(T(e.expires_at||null)?"border-red-200 bg-red-50":""),children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,t.jsxs)(h.E,{className:"".concat((e=>{switch(e){case"urgent":return"bg-red-100 text-red-800";case"admission":return"bg-blue-100 text-blue-800";case"event":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.type)," flex items-center gap-1"),children:[(e=>{switch(e){case"urgent":return(0,t.jsx)(W.A,{className:"w-4 h-4"});case"event":return(0,t.jsx)(A.A,{className:"w-4 h-4"});default:return null}})(e.type),e.type.charAt(0).toUpperCase()+e.type.slice(1)]}),!e.is_active&&(0,t.jsx)(h.E,{variant:"secondary",children:"Inactive"}),T(e.expires_at||null)&&(0,t.jsx)(h.E,{variant:"destructive",children:"Expired"})]}),(0,t.jsx)("p",{className:"text-gray-700 mb-3",children:e.content}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,t.jsxs)("div",{children:["Published: ",F(e.published_at)]}),e.expires_at&&(0,t.jsxs)("div",{children:["Expires: ",F(e.expires_at)]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,t.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>k(e),children:e.is_active?"Deactivate":"Activate"}),(0,t.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>{N(e),f({title:e.title,content:e.content,type:e.type,expires_at:e.expires_at?e.expires_at.split("T")[0]:""}),y(!0)},children:(0,t.jsx)(J.A,{className:"w-4 h-4"})}),(0,t.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>E(e.id),className:"text-red-600 hover:text-red-700",children:(0,t.jsx)(G.A,{className:"w-4 h-4"})})]})]})},e.id))})]})]})}var X=a(65523),ee=a(96583),es=a(85998),ea=a(35299),et=a(89559);function el(e){let{userId:s}=e,[a,l]=(0,i.useState)([]),[r,n]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),[o,x]=(0,i.useState)(null),m=async()=>{try{n(!0),d(null);let e=await fetch("/api/colleges/notifications");if(!e.ok)throw Error("Failed to fetch notifications");let s=await e.json();if(s.success)l(s.data);else throw Error(s.error||"Failed to fetch notifications")}catch(e){console.error("Error fetching notifications:",e),d(e instanceof Error?e.message:"Failed to fetch notifications")}finally{n(!1)}};(0,i.useEffect)(()=>{s&&m()},[s]);let u=async e=>{try{if(x(e),!(await fetch("/api/colleges/notifications/".concat(e,"/read"),{method:"PUT"})).ok)throw Error("Failed to mark notification as read");l(s=>s.map(s=>s.id===e?{...s,is_read:!0}:s))}catch(e){console.error("Error marking notification as read:",e)}finally{x(null)}},j=a.filter(e=>!e.is_read).length;return r?(0,t.jsxs)(X.Zp,{children:[(0,t.jsxs)(X.aR,{children:[(0,t.jsxs)(X.ZB,{className:"flex items-center",children:[(0,t.jsx)(es.A,{className:"h-5 w-5 mr-2"}),"College Notifications"]}),(0,t.jsx)(X.BT,{children:"Stay updated on student applications"})]}),(0,t.jsx)(X.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(ea.A,{className:"h-6 w-6 animate-spin mr-2"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading notifications..."})]})})]}):c?(0,t.jsxs)(X.Zp,{children:[(0,t.jsxs)(X.aR,{children:[(0,t.jsxs)(X.ZB,{className:"flex items-center",children:[(0,t.jsx)(es.A,{className:"h-5 w-5 mr-2"}),"College Notifications"]}),(0,t.jsx)(X.BT,{children:"Stay updated on student applications"})]}),(0,t.jsx)(X.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(W.A,{className:"h-6 w-6 text-red-500 mr-2"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-red-500 mb-2",children:c}),(0,t.jsxs)(X.$n,{variant:"outline",size:"sm",onClick:m,className:"flex items-center",children:[(0,t.jsx)(et.A,{className:"h-4 w-4 mr-2"}),"Retry"]})]})]})})]}):(0,t.jsxs)(X.Zp,{children:[(0,t.jsxs)(X.aR,{children:[(0,t.jsxs)(X.ZB,{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(es.A,{className:"h-5 w-5 mr-2"}),"College Notifications",j>0&&(0,t.jsx)(h.E,{variant:"destructive",className:"ml-2",children:j})]}),(0,t.jsxs)(X.$n,{variant:"outline",size:"sm",onClick:m,className:"flex items-center",children:[(0,t.jsx)(et.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),(0,t.jsx)(X.BT,{children:"Stay updated on student applications and important college updates"})]}),(0,t.jsx)(X.Wu,{children:0===a.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(M.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"No notifications yet"}),(0,t.jsx)("p",{className:"text-xs text-gray-400",children:"You'll receive updates about student applications here"})]}):(0,t.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-3 transition-all ".concat(e.is_read?"bg-gray-50 border-gray-200":"bg-white border-blue-200 shadow-sm"),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{let s=e.data;if((null==s?void 0:s.action)==="new_application")return(0,t.jsx)(ee.A,{className:"h-4 w-4 text-blue-600"});if((null==s?void 0:s.action)==="document_updated")return(0,t.jsx)(C.A,{className:"h-4 w-4 text-orange-600"});switch(e.type){case"admission_deadline":return(0,t.jsx)(f.A,{className:"h-4 w-4 text-orange-600"});case"scholarship":return(0,t.jsx)(p.A,{className:"h-4 w-4 text-green-600"});case"exam_reminder":return(0,t.jsx)(W.A,{className:"h-4 w-4 text-blue-600"});default:return(0,t.jsx)(es.A,{className:"h-4 w-4 text-gray-600"})}})(e),(0,t.jsx)("h4",{className:"font-medium text-sm ".concat(e.is_read?"text-gray-700":"text-gray-900"),children:e.title}),(e=>{let s=e.data;if((null==s?void 0:s.action)==="new_application")return(0,t.jsx)(h.E,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"New Application"});if((null==s?void 0:s.action)==="document_updated")return(0,t.jsx)(h.E,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Documents Updated"});switch(e.type){case"admission_deadline":return(0,t.jsx)(h.E,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:"Deadline"});case"scholarship":return(0,t.jsx)(h.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Scholarship"});case"exam_reminder":return(0,t.jsx)(h.E,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Exam"});default:return(0,t.jsx)(h.E,{variant:"secondary",children:"General"})}})(e),!e.is_read&&(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]}),!e.is_read&&(0,t.jsx)(X.$n,{variant:"ghost",size:"sm",onClick:()=>u(e.id),disabled:o===e.id,className:"h-6 w-6 p-0",children:o===e.id?(0,t.jsx)(ea.A,{className:"h-3 w-3 animate-spin"}):(0,t.jsx)(_.A,{className:"h-3 w-3"})})]}),(0,t.jsx)("p",{className:"text-sm mb-2 ".concat(e.is_read?"text-gray-600":"text-gray-800"),children:e.message}),e.data&&e.data.student_name&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:[(0,t.jsx)("strong",{children:"Student:"})," ",e.data.student_name,e.data.student_email&&(0,t.jsxs)("span",{children:[" ","(",e.data.student_email,")"]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.sent_at).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},e.id))})})]})}var ei=a(71871),er=a(93499),en=a(15870),ec=a(52619),ed=a.n(ec);function eo(){return(0,t.jsx)(ex,{})}function ex(){var e,s;let{loading:a,requireAuth:n,requireRole:c,profile:d}=(0,l.A)(),[o,m]=(0,i.useState)(null),[g,v]=(0,i.useState)(!0),[N,b]=(0,i.useState)(null);if((0,i.useEffect)(()=>{(async()=>{try{console.log("Authentication bypassed for development")}catch(e){console.error("Authentication check failed:",e),b("Authentication failed")}})()},[n,c]),(0,i.useEffect)(()=>{let e=async()=>{try{v(!0),b(null);let e=await fetch("/api/colleges/manage/",{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok){if(401===e.status)return void b("Authentication required. Please log in.");if(403===e.status)return void b("Access denied. You need college role to access this page.");throw Error("HTTP ".concat(e.status,": Failed to fetch college data"))}let s=await e.json();if(s.error)throw Error(s.error);m(s.college)}catch(e){console.error("Error fetching college data:",e),b(e instanceof Error?e.message:"Failed to fetch college data")}finally{v(!1)}};(null==d?void 0:d.id)&&e()},[null==d?void 0:d.id]),a||g)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(ei.A,{className:"h-12 w-12 text-primary animate-pulse mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading college dashboard..."})]})});if(N)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(ei.A,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:N}),(0,t.jsx)(r.$,{onClick:()=>window.location.reload(),children:"Try Again"})]})});if(!o)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(ei.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No College Data"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Unable to load college information."}),(0,t.jsx)(r.$,{onClick:()=>window.location.reload(),children:"Refresh"})]})});let y=Array.isArray(null==o?void 0:o.courses)?o.courses.length:0;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("nav",{className:"bg-white border-b",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(ei.A,{className:"h-8 w-8 text-blue-600"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:"College Dashboard"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[o.slug&&(0,t.jsx)(r.$,{variant:"outline",asChild:!0,children:(0,t.jsxs)(ed(),{href:"/colleges/".concat(o.slug),target:"_blank",children:[(0,t.jsx)(er.A,{className:"h-4 w-4 mr-2"}),"View Profile"]})}),(0,t.jsx)(r.$,{variant:"outline",asChild:!0,children:(0,t.jsxs)(ed(),{href:"/dashboard",children:[(0,t.jsx)(ei.A,{className:"h-4 w-4 mr-2"}),"Back to Main Dashboard"]})})]})]})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:o.name}),(0,t.jsx)("p",{className:"text-gray-600",children:"Manage your college profile, courses, and student applications."}),(0,t.jsxs)("div",{className:"mt-4 flex items-center space-x-4",children:[(0,t.jsx)(h.E,{variant:o.is_verified?"default":"secondary",children:o.is_verified?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Verified"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.A,{className:"h-4 w-4 mr-1"}),"Pending Verification"]})}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[null==(e=o.location)?void 0:e.city,", ",null==(s=o.location)?void 0:s.state]}),o.slug&&(0,t.jsxs)("span",{className:"text-sm text-blue-600",children:["/colleges/",o.slug]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[(0,t.jsx)(x.Zp,{children:(0,t.jsx)(x.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(O.A,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Courses"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Array.isArray(o.courses)?o.courses.length:0})]})]})})}),(0,t.jsx)(x.Zp,{children:(0,t.jsx)(x.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,t.jsx)(M.A,{className:"h-6 w-6 text-green-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Applications"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y})]})]})})}),(0,t.jsx)(x.Zp,{children:(0,t.jsx)(x.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,t.jsx)(f.A,{className:"h-6 w-6 text-yellow-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Review"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:0})]})]})})}),(0,t.jsx)(x.Zp,{children:(0,t.jsx)(x.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,t.jsx)(A.A,{className:"h-6 w-6 text-purple-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Notices"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Array.isArray(o.notices)?o.notices.length:0})]})]})})})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(el,{userId:(null==d?void 0:d.id)||""})}),(0,t.jsxs)(u.Tabs,{defaultValue:"profile",className:"space-y-6",children:[(0,t.jsxs)(u.TabsList,{className:"grid w-full grid-cols-4",children:[(0,t.jsxs)(u.TabsTrigger,{value:"profile",className:"flex items-center gap-2",children:[(0,t.jsx)(en.A,{className:"h-4 w-4"}),"College Profile"]}),(0,t.jsxs)(u.TabsTrigger,{value:"courses",className:"flex items-center gap-2",children:[(0,t.jsx)(O.A,{className:"h-4 w-4"}),"Courses (",Array.isArray(o.courses)?o.courses.length:0,")"]}),(0,t.jsxs)(u.TabsTrigger,{value:"notices",className:"flex items-center gap-2",children:[(0,t.jsx)(A.A,{className:"h-4 w-4"}),"Notices (",Array.isArray(o.notices)?o.notices.length:0,")"]}),(0,t.jsxs)(u.TabsTrigger,{value:"applications",className:"flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-4 w-4"}),"Applications (",0," pending)"]})]}),(0,t.jsxs)(u.TabsContent,{value:"profile",className:"space-y-6",children:[(0,t.jsxs)(x.Zp,{children:[(0,t.jsxs)(x.aR,{children:[(0,t.jsx)(x.ZB,{children:"Quick Actions"}),(0,t.jsx)(x.BT,{children:"Common tasks for managing your college"})]}),(0,t.jsx)(x.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(r.$,{className:"justify-start h-auto p-4",variant:"outline",children:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsxs)("div",{className:"flex items-center mb-1",children:[(0,t.jsx)(V.A,{className:"h-4 w-4 mr-2"}),"Add Course"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Create new course offerings"})]})}),(0,t.jsx)(r.$,{className:"justify-start h-auto p-4",variant:"outline",children:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsxs)("div",{className:"flex items-center mb-1",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Post Notice"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Share important updates"})]})}),(0,t.jsx)(r.$,{className:"justify-start h-auto p-4",variant:"outline",children:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsxs)("div",{className:"flex items-center mb-1",children:[(0,t.jsx)(M.A,{className:"h-4 w-4 mr-2"}),"View Applications"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Manage student applications"})]})}),(0,t.jsx)(r.$,{className:"justify-start h-auto p-4",variant:"outline",children:(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsxs)("div",{className:"flex items-center mb-1",children:[(0,t.jsx)(en.A,{className:"h-4 w-4 mr-2"}),"Edit Profile"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Update college information"})]})})]})})]}),(0,t.jsx)(j,{initialData:{id:o.id,slug:o.slug||"",name:o.name,type:o.type||"private",location:o.location||{state:"",city:""},address:o.address||"",website:o.website||null,phone:o.phone||null,email:o.email||null,established_year:o.established_year||null,accreditation:o.accreditation||null,about:o.about||null,admission_criteria:o.admission_criteria||null,scholarships:o.scholarships||null,entrance_tests:o.entrance_tests||null,fee_structure:o.fee_structure||null,gallery:o.gallery||null,facilities:o.facilities||null,programs:o.programs||null,cut_off_data:o.cut_off_data||null,admission_process:o.admission_process||null,fees:o.fees||null,images:o.images||null,is_verified:o.is_verified||!1,is_active:o.is_active||!0,courses:Array.isArray(o.courses)?o.courses:[],notices:Array.isArray(o.notices)?o.notices:[],events:Array.isArray(o.events)?o.events:[],created_at:o.created_at||new Date().toISOString(),updated_at:o.updated_at||new Date().toISOString()}})]}),(0,t.jsx)(u.TabsContent,{value:"courses",children:(0,t.jsx)(H,{collegeId:o.id,collegeName:o.name})}),(0,t.jsx)(u.TabsContent,{value:"notices",children:(0,t.jsx)(Q,{collegeId:o.id})}),(0,t.jsx)(u.TabsContent,{value:"applications",children:(0,t.jsx)(T,{collegeId:o.id,collegeName:o.name})})]})]})]})}},65580:(e,s,a)=>{Promise.resolve().then(a.bind(a,50732))}},e=>{e.O(0,[8096,6332,7061,6867,5523,8441,7358],()=>e(e.s=65580)),_N_E=e.O()}]);