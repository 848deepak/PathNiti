(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2155],{91686:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(95155),l=t(12115),n=t(65523),i=t(47061),r=t(71871),c=t(35626),d=t(15870),x=t(80534),m=t(35299),o=t(6132),h=t(96583),j=t(39347),u=t(47937),p=t(1524),g=t(91169),N=t(21873),f=t(52619),v=t.n(f);function y(){var e,s,t,f,y,w,b;let{loading:A,requireAuth:M,requireRole:Z,profile:R}=(0,i.A)(),[B,C]=(0,l.useState)(null),[E,S]=(0,l.useState)(!0),[F,P]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async()=>{try{await M(),await Z("college")}catch(e){console.error("Authentication check failed:",e)}})()},[M,Z]),(0,l.useEffect)(()=>{(async()=>{if(null==R?void 0:R.id)try{S(!0),P(null);let e=await fetch("/api/college/analytics?college_id=".concat(R.id));if(!e.ok)throw Error("Failed to fetch analytics data");let s=await e.json();if(s.success)C(s.data);else throw Error(s.error||"Failed to fetch analytics")}catch(e){console.error("Error fetching analytics:",e),P(e instanceof Error?e.message:"Failed to fetch analytics")}finally{S(!1)}})()},[null==R?void 0:R.id]),A)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(r.A,{className:"h-12 w-12 text-primary animate-pulse mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading college dashboard..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-blue-50",children:[(0,a.jsx)("div",{className:"bg-white border-b shadow-sm",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(v(),{href:"/",className:"flex items-center text-gray-600 hover:text-primary transition-colors",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 mr-2"}),"Back to Main Site"]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"College Analytics Dashboard"})]}),(0,a.jsx)(n.$n,{variant:"outline",asChild:!0,children:(0,a.jsxs)(v(),{href:"/colleges/dashboard",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Manage Profile"]})})]})})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(n.Zp,{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white",children:(0,a.jsx)(n.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-2",children:["Welcome, ",(null==R?void 0:R.first_name)||"College","!"]}),(0,a.jsx)("p",{className:"text-green-100",children:"Monitor your college's visibility, student engagement, and application metrics."})]}),(0,a.jsx)(r.A,{className:"h-16 w-16 text-green-200"})]})})})}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Student Interests"}),(0,a.jsx)(x.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(n.Wu,{children:E?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):F?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Error"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==B?void 0:B.totalInterests)||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null==B?void 0:B.interestsThisMonth)||0," this month"]})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Applications"}),(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(n.Wu,{children:E?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):F?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Error"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==B?void 0:B.totalApplications)||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null==B?void 0:B.applicationsThisMonth)||0," this month"]})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Programs Offered"}),(0,a.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(n.Wu,{children:E?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):F?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Error"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==B?void 0:B.totalPrograms)||0}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Avg fees: ₹",((null==B?void 0:B.averageFees)||0).toLocaleString()]})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Conversion Rate"}),(0,a.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(n.Wu,{children:E?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading..."})]}):F?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Error"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round((null==B||null==(e=B.engagementMetrics)?void 0:e.applicationConversionRate)||0),"%"]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Interest to application"})]})})]})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 mr-2"}),"Engagement Analytics"]}),(0,a.jsx)(n.BT,{children:"Student interaction and interest trends"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Interest Growth Rate"}),(0,a.jsx)("span",{className:"text-sm text-green-600",children:E?"...":"+".concat(Math.round((null==B||null==(s=B.engagementMetrics)?void 0:s.interestGrowthRate)||0),"%")})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(Math.min((null==B||null==(t=B.engagementMetrics)?void 0:t.interestGrowthRate)||0,100),"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Application Conversion Rate"}),(0,a.jsx)("span",{className:"text-sm text-blue-600",children:E?"...":"".concat(Math.round((null==B||null==(f=B.engagementMetrics)?void 0:f.applicationConversionRate)||0),"%")})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(Math.min((null==B||null==(y=B.engagementMetrics)?void 0:y.applicationConversionRate)||0,100),"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Average Program Fees"}),(0,a.jsx)("span",{className:"text-sm text-purple-600",children:E?"...":"₹".concat(((null==B||null==(w=B.engagementMetrics)?void 0:w.averageProgramFees)||0).toLocaleString())})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"75%"}})})]})]})})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Quick Actions"}),(0,a.jsx)(n.BT,{children:"Manage your college presence"})]}),(0,a.jsxs)(n.Wu,{className:"space-y-3",children:[(0,a.jsx)(n.$n,{className:"w-full justify-start",variant:"outline",asChild:!0,children:(0,a.jsxs)(v(),{href:"/colleges/manage",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 mr-2"}),"Update Profile"]})}),(0,a.jsx)(n.$n,{className:"w-full justify-start",variant:"outline",asChild:!0,children:(0,a.jsxs)(v(),{href:"/colleges/manage",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Manage Programs"]})}),(0,a.jsx)(n.$n,{className:"w-full justify-start",variant:"outline",asChild:!0,children:(0,a.jsxs)(v(),{href:"/colleges/manage",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"View Inquiries"]})}),(0,a.jsx)(n.$n,{className:"w-full justify-start",variant:"outline",asChild:!0,children:(0,a.jsxs)(v(),{href:"/colleges",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Public Profile"]})})]})]})})]}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Popular Programs"}),(0,a.jsx)(n.BT,{children:"Most viewed programs this month"})]}),(0,a.jsx)(n.Wu,{children:E?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 animate-spin mr-2"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading programs..."})]}):F?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(o.A,{className:"h-6 w-6 text-red-500 mr-2"}),(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Failed to load programs"})]}):(0,a.jsx)("div",{className:"space-y-4",children:(null==B?void 0:B.streamDistribution)&&Object.keys(B.streamDistribution).length>0?Object.entries(B.streamDistribution).map((e,s)=>{let[t,l]=e,n=["text-green-600","text-blue-600","text-purple-600","text-orange-600"];return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:t.replace("_"," ").toUpperCase()}),(0,a.jsxs)("span",{className:"text-sm ".concat(n[s%n.length]),children:[l," programs"]})]},t)}):(0,a.jsx)("div",{className:"text-center py-4",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No program data available"})})})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Geographic Interest"}),(0,a.jsx)(n.BT,{children:"Where your applicants are from"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Same State"}),(0,a.jsx)("span",{className:"text-sm text-green-600",children:"68%"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Neighboring States"}),(0,a.jsx)("span",{className:"text-sm text-blue-600",children:"22%"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Other States"}),(0,a.jsx)("span",{className:"text-sm text-purple-600",children:"8%"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"International"}),(0,a.jsx)("span",{className:"text-sm text-orange-600",children:"2%"})]})]})})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsx)(n.ZB,{children:"Recent Activity"}),(0,a.jsx)(n.BT,{children:"Latest updates and student interactions"})]}),(0,a.jsx)(n.Wu,{children:E?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 animate-spin mr-2"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Loading activity..."})]}):F?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(o.A,{className:"h-6 w-6 text-red-500 mr-2"}),(0,a.jsx)("span",{className:"text-sm text-red-500",children:"Failed to load activity"})]}):(0,a.jsx)("div",{className:"space-y-4",children:(null==B||null==(b=B.recentActivity)?void 0:b.length)?B.recentActivity.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e.action.includes("college")?"bg-green-600":e.action.includes("program")?"bg-blue-600":e.action.includes("application")?"bg-purple-600":"bg-orange-600")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.description}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:e.timeAgo})]})]},s)):(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No recent activity"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Student interactions will appear here"})]})})})]})]})]})}},92923:(e,s,t)=>{Promise.resolve().then(t.bind(t,91686))}},e=>{e.O(0,[8096,6332,7061,6867,5523,8441,7358],()=>e(e.s=92923)),_N_E=e.O()}]);