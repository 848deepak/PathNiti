(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6440],{23297:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var o=i(95155),r=i(12115),n=i(32294);function a(){let[e,t]=(0,r.useState)(null),[i,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d(!0)},[]),(0,r.useEffect)(()=>{c&&(async()=>{try{let e=await n.I.getDeviceInfo();t(e);let i=await n.I.isOnline();l(i);try{let e=await n.I.getCurrentLocation();a(e)}catch(e){console.log("Location not available:",e)}}catch(e){console.error("Failed to initialize test:",e)}})()},[c]);let u=async()=>{try{let e=await n.I.takePhoto();e&&(alert("Photo taken successfully!"),console.log("Photo:",e))}catch(e){alert("Camera not available: "+e)}},h=async()=>{alert("Splash screen will be shown automatically when the app launches on mobile devices")};return c?(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 p-4",children:(0,o.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Mobile App Testing"}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Device Information"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Platform:"})," ",(null==e?void 0:e.platform)||"Loading..."]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Model:"})," ",(null==e?void 0:e.model)||"Loading..."]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"OS Version:"})," ",(null==e?void 0:e.osVersion)||"Loading..."]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Is Native:"})," ",(null==e?void 0:e.isNative)?"Yes":"No"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Online:"})," ",s?"Yes":"No"]})]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Location"}),i?(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Latitude:"})," ",i.coords.latitude]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Longitude:"})," ",i.coords.longitude]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Accuracy:"})," ",i.coords.accuracy,"m"]})]}):(0,o.jsx)("p",{className:"text-gray-500",children:"Location not available or permission denied"})]}),(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Test Mobile Features"}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("button",{onClick:u,className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600",children:"Test Camera"}),(0,o.jsx)("button",{onClick:h,className:"w-full bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600",children:"Test Splash Screen"})]})]}),(0,o.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4 text-blue-800",children:"Testing Instructions"}),(0,o.jsxs)("div",{className:"space-y-2 text-blue-700",children:[(0,o.jsxs)("p",{children:["• ",(0,o.jsx)("strong",{children:"Web Testing:"})," Use browser dev tools to simulate mobile devices"]}),(0,o.jsxs)("p",{children:["• ",(0,o.jsx)("strong",{children:"Android:"})," Run ",(0,o.jsx)("code",{children:"npm run run:android"})," with Android Studio"]}),(0,o.jsxs)("p",{children:["• ",(0,o.jsx)("strong",{children:"iOS:"})," Run ",(0,o.jsx)("code",{children:"npm run run:ios"})," with Xcode"]}),(0,o.jsxs)("p",{children:["• ",(0,o.jsx)("strong",{children:"PWA:"}),' Look for "Add to Home Screen" prompt on mobile browsers']}),(0,o.jsxs)("p",{children:["• ",(0,o.jsx)("strong",{children:"Offline:"})," Test by going offline in browser dev tools"]})]})]})]})}):(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Loading mobile test..."})]})})}},32100:(e,t,i)=>{Promise.resolve().then(i.bind(i,23297))},32294:(e,t,i)=>{"use strict";i.d(t,{I:()=>f});var o=i(32587),r=i(39226),n=i(92365),a=i(93589),s=i(81494),l=i(8703),c=i(8781),d=i(71223),u=i(30249),h=i(64375),g=i(4077),m=i(24995);class p{async initialize(){if(!this.isInitialized)try{o.Ii.isNativePlatform()&&await this.initializeNativeFeatures(),this.deviceInfo=await this.getDeviceInfo(),await this.initializeNetworkMonitoring(),await this.initializePushNotifications(),this.isInitialized=!0,console.log("CapacitorService: Initialized successfully")}catch(e){console.error("CapacitorService: Initialization failed",e)}}async initializeNativeFeatures(){try{await n.eA.setStyle({style:n.OF.Dark}),await n.eA.setBackgroundColor({color:"#1A237E"}),await a.S.hide(),r.q.addListener("appStateChange",e=>{let{isActive:t}=e;console.log("App state changed. Is active?",t)}),r.q.addListener("appUrlOpen",e=>{console.log("App opened with URL:",e.url)}),r.q.addListener("appRestoredResult",e=>{console.log("App restored with result:",e)}),console.log("Native features initialized")}catch(e){console.error("Failed to initialize native features:",e)}}async getDeviceInfo(){try{let e=await h.p.getInfo(),t=await u.l.getStatus();return{isNative:o.Ii.isNativePlatform(),platform:e.platform,model:e.model,osVersion:e.osVersion,appVersion:"1.0.0",isConnected:t.connected,connectionType:t.connectionType}}catch(e){return console.error("Failed to get device info:",e),{isNative:!1,platform:"web",model:"unknown",osVersion:"unknown",appVersion:"1.0.0",isConnected:navigator.onLine,connectionType:"unknown"}}}async initializeNetworkMonitoring(){try{u.l.addListener("networkStatusChange",e=>{console.log("Network status changed:",e),window.dispatchEvent(new CustomEvent("networkStatusChange",{detail:e}))})}catch(e){console.error("Failed to initialize network monitoring:",e)}}async initializePushNotifications(){if(o.Ii.isNativePlatform())try{let e=await s.h.requestPermissions();"granted"===e.receive&&await s.h.register(),s.h.addListener("registration",e=>{console.log("Push registration success, token: "+e.value),this.storePushToken(e.value)}),s.h.addListener("registrationError",e=>{console.error("Error on registration: "+JSON.stringify(e))}),s.h.addListener("pushNotificationReceived",e=>{console.log("Push notification received: ",e),this.handleNotificationReceived(e)}),s.h.addListener("pushNotificationActionPerformed",e=>{console.log("Push notification action performed",e.actionId,e.inputValue),this.handleNotificationAction(e)})}catch(e){console.error("Failed to initialize push notifications:",e)}}async storePushToken(e){try{await g.p.set({key:"push_token",value:e}),console.log("Push token stored:",e)}catch(e){console.error("Failed to store push token:",e)}}handleNotificationReceived(e){this.triggerHapticFeedback(),this.showLocalNotification({title:e.title||"PathNiti",body:e.body||"You have a new notification",data:e.data})}handleNotificationAction(e){let t=e.actionId,i=e.notification.data;switch(t){case"tap":(null==i?void 0:i.url)&&(window.location.href=i.url);break;case"view":(null==i?void 0:i.page)&&(window.location.href=i.page);break;default:console.log("Unknown notification action:",t)}}async showLocalNotification(e){if(o.Ii.isNativePlatform())try{await l.W.schedule({notifications:[{title:e.title,body:e.body,id:Date.now(),schedule:{at:new Date(Date.now()+1e3)},sound:"beep.wav",attachments:void 0,actionTypeId:"",extra:e.data}]})}catch(e){console.error("Failed to show local notification:",e)}}async getCurrentLocation(){if(!o.Ii.isNativePlatform())return new Promise(e=>{if(!navigator.geolocation)return void e(null);navigator.geolocation.getCurrentPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,timestamp:t.timestamp})},t=>{console.error("Geolocation error:",t),e(null)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})});try{let e=await c.L.getCurrentPosition({enableHighAccuracy:!0,timeout:1e4});return{latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,timestamp:e.timestamp}}catch(e){return console.error("Failed to get location:",e),null}}async takePhoto(){if(!o.Ii.isNativePlatform())return new Promise(e=>{let t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=t=>{var i;let o=null==(i=t.target.files)?void 0:i[0];if(o){let t=new FileReader;t.onload=()=>e(t.result),t.readAsDataURL(o)}else e(null)},t.click()});try{return(await d.i7.getPhoto({quality:90,allowEditing:!1,resultType:d.LK.DataUrl,source:d.ru.Camera})).dataUrl||null}catch(e){return console.error("Failed to take photo:",e),null}}async triggerHapticFeedback(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.kn.Medium;if(o.Ii.isNativePlatform())try{await m.dn.impact({style:e})}catch(e){console.error("Failed to trigger haptic feedback:",e)}}async isOnline(){if(!o.Ii.isNativePlatform())return navigator.onLine;try{return(await u.l.getStatus()).connected}catch(e){return console.error("Failed to check network status:",e),navigator.onLine}}async setPreference(e,t){try{await g.p.set({key:e,value:t})}catch(e){console.error("Failed to set preference:",e)}}async getPreference(e){try{return(await g.p.get({key:e})).value}catch(e){return console.error("Failed to get preference:",e),null}}async removePreference(e){try{await g.p.remove({key:e})}catch(e){console.error("Failed to remove preference:",e)}}getDeviceInfoSync(){return this.deviceInfo}isNative(){return o.Ii.isNativePlatform()}getPlatform(){return o.Ii.getPlatform()}constructor(){this.isInitialized=!1,this.deviceInfo=null}}let f=new p}},e=>{e.O(0,[8096,8441,7358],()=>e(e.s=32100)),_N_E=e.O()}]);