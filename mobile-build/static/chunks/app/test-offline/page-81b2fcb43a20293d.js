(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8445],{8401:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(95155),i=s(12115),r=s(3998),n=s(86948),o=s(11647),c=s(85710),l=s(1473),h=s(42529),d=s(37586),u=s(21873),m=s(89559),g=s(26983),p=s(3166),y=s(33738),_=s(78874),f=s(98635),w=s(9572);class S{setupEventListeners(){window.addEventListener("online",()=>{this.onlineStatus=!0,this.notifyListeners(),this.triggerSync()}),window.addEventListener("offline",()=>{this.onlineStatus=!1,this.notifyListeners()}),document.addEventListener("visibilitychange",()=>{!document.hidden&&this.onlineStatus&&this.triggerSync()})}startPeriodicSync(){this.syncInterval=setInterval(()=>{this.onlineStatus&&!this.syncInProgress&&this.triggerSync()},3e5)}addStatusListener(e){return this.listeners.push(e),()=>{let t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}notifyListeners(){let e=this.getSyncStatus();this.listeners.forEach(t=>t(e))}getSyncStatus(){return{isOnline:this.onlineStatus,lastSyncTime:localStorage.getItem("lastSyncTime"),pendingItems:0,syncInProgress:this.syncInProgress,lastError:localStorage.getItem("lastSyncError")}}async triggerSync(){if(this.syncInProgress||!this.onlineStatus)return{success:!1,syncedItems:0,failedItems:0,errors:["Sync already in progress or offline"],duration:0};let e=Date.now();this.syncInProgress=!0,this.notifyListeners();try{let t=await Promise.allSettled([this.syncQuizResponses(),this.syncAssessmentSessions(),this.syncChatMessages(),this.syncUserProfile(),this.syncCacheData()]),s=t.filter(e=>"fulfilled"===e.status).reduce((e,t)=>e+t.value,0),a=t.filter(e=>"rejected"===e.status).length,i=t.filter(e=>"rejected"===e.status).map(e=>{var t;return(null==(t=e.reason)?void 0:t.message)||"Unknown error"}),r=0===a,n=Date.now()-e;return r?(localStorage.setItem("lastSyncTime",new Date().toISOString()),localStorage.removeItem("lastSyncError")):localStorage.setItem("lastSyncError",i.join("; ")),this.syncInProgress=!1,this.notifyListeners(),{success:r,syncedItems:s,failedItems:a,errors:i,duration:n}}catch(t){return this.syncInProgress=!1,this.notifyListeners(),{success:!1,syncedItems:0,failedItems:1,errors:[t instanceof Error?t.message:"Unknown error"],duration:Date.now()-e}}}async syncQuizResponses(){let e=await f.Vc.getUnsyncedQuizResponses(),t=0;for(let s of e)try{let{error:e}=await w.supabase.from("assessment_responses").insert({session_id:s.session_id,question_id:s.question_id,user_answer:s.user_answer,time_taken:s.time_taken,is_correct:s.is_correct,answered_at:s.answered_at});if(e){console.error("Failed to sync quiz response:",e);continue}await f.Vc.markQuizResponseSynced(s.id),t++}catch(e){console.error("Error syncing quiz response:",e)}return t}async syncAssessmentSessions(){let e=await f.Vc.getUnsyncedAssessmentSessions(),t=0;for(let s of e)try{let{error:e}=await w.supabase.from("assessment_sessions").upsert({id:s.id,user_id:s.user_id,status:s.status,started_at:s.started_at,completed_at:s.completed_at,aptitude_scores:s.aptitude_scores,riasec_scores:s.riasec_scores,personality_scores:s.personality_scores,subject_performance:s.subject_performance,practical_constraints:s.practical_constraints,total_score:s.total_score,total_questions:s.total_questions,answered_questions:s.answered_questions,time_spent:s.time_spent,session_type:s.session_type});if(e){console.error("Failed to sync assessment session:",e);continue}await f.Vc.updateAssessmentSession(s.id,{synced:!0}),t++}catch(e){console.error("Error syncing assessment session:",e)}return t}async syncChatMessages(){let e=(await f.Vc.getSyncQueue()).filter(e=>"chat_message"===e.type),t=0;for(let s of e)try{let e=s.data,{error:a}=await w.supabase.from("chat_messages").insert({session_id:e.session_id,type:e.type,content:e.content,timestamp:e.timestamp,metadata:e.metadata});if(a){console.error("Failed to sync chat message:",a);continue}await f.Vc.removeFromSyncQueue(s.id),t++}catch(e){console.error("Error syncing chat message:",e)}return t}async syncUserProfile(){let e=await f.Vc.getUserProfile();if(!e||!e.pending_updates)return 0;try{let{error:t}=await w.supabase.from("profiles").update({phone:e.phone,first_name:e.first_name,last_name:e.last_name,date_of_birth:e.date_of_birth,gender:e.gender,class_level:e.class_level,stream:e.stream,location:e.location,interests:e.interests,avatar_url:e.avatar_url,updated_at:new Date().toISOString()}).eq("id",e.id);if(t)return console.error("Failed to sync user profile:",t),0;return await f.Vc.saveUserProfile({...e,pending_updates:!1,last_synced:new Date().toISOString()}),1}catch(e){return console.error("Error syncing user profile:",e),0}}async syncCacheData(){try{return await this.refreshCollegesCache(),await this.refreshScholarshipsCache(),await this.refreshAwarenessContentCache(),1}catch(e){return console.error("Error syncing cache data:",e),0}}async refreshCollegesCache(){try{let{data:e,error:t}=await w.supabase.from("colleges").select("\n          id, name, type, location, address, website, phone, email,\n          established_year, accreditation, facilities, is_active,\n          programs(name, stream, level, duration, eligibility, fees)\n        ").eq("is_active",!0).limit(100);if(t)return void console.error("Failed to fetch colleges:",t);let s=e.map(e=>({...e,cached_at:new Date().toISOString(),last_synced:new Date().toISOString()}));await f.Vc.cacheColleges(s)}catch(e){console.error("Error refreshing colleges cache:",e)}}async refreshScholarshipsCache(){try{let{data:e,error:t}=await w.supabase.from("scholarships").select("*").eq("is_active",!0).limit(50);if(t)return void console.error("Failed to fetch scholarships:",t);let s=e.map(e=>({...e,cached_at:new Date().toISOString(),last_synced:new Date().toISOString()}));await f.Vc.cacheScholarships(s)}catch(e){console.error("Error refreshing scholarships cache:",e)}}async refreshAwarenessContentCache(){try{let e=[{id:"awareness_1",title:"Career Guidance for Class 10 Students",content:"Choosing the right stream after Class 10 is crucial for your future career...",type:"career_guide",category:"stream_selection",tags:["class10","stream","career"],created_at:new Date().toISOString(),cached_at:new Date().toISOString()},{id:"awareness_2",title:"Government Scholarship Programs",content:"Various government scholarship programs are available for students...",type:"faq",category:"scholarships",tags:["scholarship","government","financial_aid"],created_at:new Date().toISOString(),cached_at:new Date().toISOString()}];await f.Vc.cacheAwarenessContent(e)}catch(e){console.error("Error refreshing awareness content cache:",e)}}async forceSync(){let e=this.onlineStatus;this.onlineStatus=!0;try{return await this.triggerSync()}finally{this.onlineStatus=e}}destroy(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null),this.listeners=[]}constructor(){this.syncInProgress=!1,this.syncInterval=null,this.onlineStatus=navigator.onLine,this.listeners=[],this.setupEventListeners(),this.startPeriodicSync()}}let v=new S;class C{setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,this.syncPendingData()}),window.addEventListener("offline",()=>{this.isOnline=!1})}async initializeQuestionsCache(){try{await f.Vc.initialize(),await this.loadQuestionsCache()}catch(e){console.error("Failed to initialize quiz manager:",e)}}async loadQuestionsCache(){let e=Date.now();if(!(this.questionsCache.length>0)||!(e-this.cacheTimestamp<this.CACHE_DURATION))try{if(this.isOnline){let{data:t,error:s}=await w.supabase.from("quiz_questions").select("*").eq("is_active",!0).order("category, question_type");if(s)return void console.error("Failed to fetch questions:",s);this.questionsCache=t||[],this.cacheTimestamp=e,await this.cacheQuestionsForOffline(t||[])}else await this.loadQuestionsFromOfflineCache()}catch(e){console.error("Error loading questions cache:",e),await this.loadQuestionsFromOfflineCache()}}async cacheQuestionsForOffline(e){try{localStorage.setItem("quiz_questions_cache",JSON.stringify({questions:e,timestamp:Date.now()}))}catch(e){console.error("Failed to cache questions:",e)}}async loadQuestionsFromOfflineCache(){try{let e=localStorage.getItem("quiz_questions_cache");if(e){let{questions:t,timestamp:s}=JSON.parse(e);this.questionsCache=t||[],this.cacheTimestamp=s||0}}catch(e){console.error("Failed to load questions from cache:",e)}}async startQuizSession(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"comprehensive",s={id:"session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),user_id:e,status:"in_progress",started_at:new Date().toISOString(),total_questions:0,answered_questions:0,time_spent:0,session_type:t,synced:!1};try{return await f.Vc.saveAssessmentSession({user_id:e,status:"in_progress",started_at:s.started_at,total_score:0,total_questions:0,answered_questions:0,time_spent:0,session_type:t}),s}catch(e){throw console.error("Failed to start quiz session:",e),e}}async getQuestionsForSession(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"comprehensive",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(await this.loadQuestionsCache(),0===this.questionsCache.length)throw Error("No questions available. Please check your internet connection.");let s=this.questionsCache;return"aptitude_only"===e?s=this.questionsCache.filter(e=>"aptitude"===e.question_type):"interest_only"===e?s=this.questionsCache.filter(e=>"riasec_interest"===e.question_type):"personality_only"===e&&(s=this.questionsCache.filter(e=>"personality"===e.question_type)),this.shuffleArray([...s]).slice(0,t)}async submitAnswer(e,t){try{await f.Vc.saveQuizResponse({session_id:e,question_id:t.question_id,user_answer:t.selected_answer,time_taken:t.time_taken,is_correct:this.calculateCorrectness(t),answered_at:new Date().toISOString()}),await this.updateSessionProgress(e,t.time_taken),this.isOnline&&await this.syncPendingData()}catch(e){throw console.error("Failed to submit answer:",e),e}}calculateCorrectness(e){let t=this.questionsCache.find(t=>t.id===e.question_id);if(t&&void 0!==t.correct_answer)return e.selected_answer===t.correct_answer}async updateSessionProgress(e,t){try{let s=await f.Vc.getAssessmentSession(e);s&&await f.Vc.updateAssessmentSession(e,{answered_questions:s.answered_questions+1,time_spent:s.time_spent+t})}catch(e){console.error("Failed to update session progress:",e)}}async completeQuizSession(e,t){try{let s=await f.Vc.getQuizResponses(e);if(!await f.Vc.getAssessmentSession(e))throw Error("Session not found");let a=this.calculateScores(s);await f.Vc.updateAssessmentSession(e,{status:"completed",completed_at:new Date().toISOString(),aptitude_scores:a.aptitude_scores,riasec_scores:a.riasec_scores,personality_scores:a.personality_scores,subject_performance:a.subject_performance,practical_constraints:t,total_score:a.total_score});let i=await this.generateRecommendations(a),r={session_id:e,total_score:a.total_score,aptitude_scores:a.aptitude_scores,riasec_scores:a.riasec_scores,personality_scores:a.personality_scores,subject_performance:a.subject_performance,practical_constraints:t,recommendations:i};return this.isOnline&&await this.syncPendingData(),r}catch(e){throw console.error("Failed to complete quiz session:",e),e}}calculateScores(e){let t={},s={},a={},i={};e.forEach(e=>{let r=this.questionsCache.find(t=>t.id===e.question_id);if(!r)return;let n=e.user_answer+1;"aptitude"===r.question_type?(t[r.category]||(t[r.category]=[]),t[r.category].push(n)):"riasec_interest"===r.question_type?(s[r.category]||(s[r.category]=[]),s[r.category].push(n)):"personality"===r.question_type?(a[r.category]||(a[r.category]=[]),a[r.category].push(n)):"subject_performance"===r.question_type&&(i[r.category]||(i[r.category]={accuracy:[],speed:[]}),i[r.category].accuracy.push(n),i[r.category].speed.push(n))});let r=e=>e.length>0?Math.round(e.reduce((e,t)=>e+t,0)/e.length*20):50,n=Object.fromEntries(Object.entries(t).map(e=>{let[t,s]=e;return[t,r(s)]})),o=Object.fromEntries(Object.entries(s).map(e=>{let[t,s]=e;return[t,r(s)]})),c=Object.fromEntries(Object.entries(a).map(e=>{let[t,s]=e;return[t,r(s)]})),l=Object.fromEntries(Object.entries(i).map(e=>{let[t,s]=e;return[t,{accuracy:r(s.accuracy),speed:r(s.speed)}]}));return{total_score:Math.round((Object.values(n).reduce((e,t)=>e+t,0)+Object.values(o).reduce((e,t)=>e+t,0)+Object.values(c).reduce((e,t)=>e+t,0))/3),aptitude_scores:n,riasec_scores:o,personality_scores:c,subject_performance:l}}async generateRecommendations(e){let t=[],s=Object.entries(e.riasec_scores).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s})[0];if(s){let[e,a]=s,i="arts";switch(e){case"realistic":case"investigative":i="science";break;case"artistic":case"social":i="arts";break;case"enterprising":case"conventional":i="commerce"}t.push({type:"stream_recommendation",title:"Recommended Stream: ".concat(i.toUpperCase()),description:"Based on your ".concat(e," interests (score: ").concat(a,"), we recommend the ").concat(i," stream."),confidence:Math.min(a/100,1),reasoning:["High ".concat(e," interest score (").concat(a,"%)"),"Strong alignment with ".concat(i," stream requirements"),"Good career prospects in this field"]})}let a=Object.entries(e.aptitude_scores).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s})[0];if(a){let[e,s]=a,i="General career guidance";switch(e){case"logical_reasoning":i="Engineering, Computer Science, Mathematics";break;case"quantitative_skills":i="Finance, Economics, Statistics, Engineering";break;case"language_verbal_skills":i="Literature, Journalism, Law, Teaching";break;case"spatial_visual_skills":i="Architecture, Design, Engineering, Art";break;case"memory_attention":i="Medicine, Research, Law, Teaching"}t.push({type:"career_recommendation",title:"Career Suggestions",description:"Your strong ".concat(e.replace("_"," ")," skills (").concat(s,"%) suggest careers in: ").concat(i),confidence:Math.min(s/100,1),reasoning:["High ".concat(e.replace("_"," ")," score (").concat(s,"%)"),"Strong foundation for related careers","Good potential for success in these fields"]})}return t}async getQuizHistory(){try{return[]}catch(e){return console.error("Failed to get quiz history:",e),[]}}async syncPendingData(){if(this.isOnline)try{await v.triggerSync()}catch(e){console.error("Failed to sync pending data:",e)}}getOnlineStatus(){return this.isOnline}async getCachedQuestionsCount(){return await this.loadQuestionsCache(),this.questionsCache.length}shuffleArray(e){let t=[...e];for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}constructor(){this.isOnline=navigator.onLine,this.questionsCache=[],this.cacheTimestamp=0,this.CACHE_DURATION=864e5,this.setupEventListeners(),this.initializeQuestionsCache()}}let x=new C;class b{setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,this.refreshCache()}),window.addEventListener("offline",()=>{this.isOnline=!1})}async initializeCache(){try{await f.Vc.initialize(),await this.loadCachedData()}catch(e){console.error("Failed to initialize recommendations engine:",e)}}async loadCachedData(){try{this.cachedColleges=await f.Vc.getCachedColleges(),this.cachedScholarships=await f.Vc.getCachedScholarships(),this.cachedCareers=await this.getCachedCareers()}catch(e){console.error("Failed to load cached data:",e)}}async refreshCache(){if(this.isOnline)try{let{data:e,error:t}=await w.supabase.from("colleges").select("\n          id, name, type, location, address, website, phone, email,\n          established_year, accreditation, facilities, is_active,\n          programs(name, stream, level, duration, eligibility, fees)\n        ").eq("is_active",!0).limit(100);!t&&e&&(this.cachedColleges=e,await f.Vc.cacheColleges(e.map(e=>({...e,cached_at:new Date().toISOString(),last_synced:new Date().toISOString()}))));let{data:s,error:a}=await w.supabase.from("scholarships").select("*").eq("is_active",!0).limit(50);!a&&s&&(this.cachedScholarships=s,await f.Vc.cacheScholarships(s.map(e=>({...e,cached_at:new Date().toISOString(),last_synced:new Date().toISOString()}))))}catch(e){console.error("Failed to refresh cache:",e)}}getCachedCareers(){return[{id:"career_1",name:"Software Engineer",description:"Design and develop software applications",required_education:"Bachelor in Computer Science/Engineering",salary_range:"₹4-15 LPA",job_market_demand:"high",growth_prospects:"high",required_skills:["Programming","Problem Solving","Mathematics"],related_streams:["science","engineering"],riasec_types:["investigative","realistic"]},{id:"career_2",name:"Doctor",description:"Diagnose and treat medical conditions",required_education:"MBBS + Specialization",salary_range:"₹6-25 LPA",job_market_demand:"high",growth_prospects:"high",required_skills:["Biology","Chemistry","Empathy","Problem Solving"],related_streams:["science","medical"],riasec_types:["investigative","social"]},{id:"career_3",name:"Teacher",description:"Educate and mentor students",required_education:"Bachelor + B.Ed",salary_range:"₹3-8 LPA",job_market_demand:"medium",growth_prospects:"medium",required_skills:["Communication","Patience","Subject Knowledge"],related_streams:["arts","science","commerce"],riasec_types:["social","artistic"]},{id:"career_4",name:"Business Analyst",description:"Analyze business processes and recommend improvements",required_education:"Bachelor in Commerce/Business",salary_range:"₹4-12 LPA",job_market_demand:"high",growth_prospects:"high",required_skills:["Analytics","Communication","Problem Solving"],related_streams:["commerce","science"],riasec_types:["investigative","enterprising"]},{id:"career_5",name:"Graphic Designer",description:"Create visual content for various media",required_education:"Bachelor in Fine Arts/Design",salary_range:"₹3-10 LPA",job_market_demand:"medium",growth_prospects:"medium",required_skills:["Creativity","Design Software","Visual Communication"],related_streams:["arts"],riasec_types:["artistic","realistic"]}]}async generateRecommendations(e){try{let t=await this.generateStreamRecommendations(e),s=await this.generateCollegeRecommendations(e),a=await this.generateCareerRecommendations(e),i=await this.generateScholarshipRecommendations(e),r=this.calculateConfidenceScore(t,s,a,i);return{stream_recommendations:t,college_recommendations:s,career_recommendations:a,scholarship_recommendations:i,offline_mode:!this.isOnline,confidence_score:r,generated_at:new Date().toISOString()}}catch(e){throw console.error("Failed to generate recommendations:",e),e}}async generateStreamRecommendations(e){let t=[],{assessment_scores:s,user_profile:a}=e;if(!(null==s?void 0:s.riasec_scores))return this.getFallbackStreamRecommendations(a);let i=s.riasec_scores,r=s.aptitude_scores||{};for(let[e,s]of Object.entries(i).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).slice(0,3)){let a=this.mapInterestToStream(e,s);a&&t.push(a)}if(r.logical_reasoning&&r.logical_reasoning>70){let e=this.createStreamRecommendation("science",.8,["Strong logical reasoning skills","Good foundation for science subjects"],["Engineering","Medicine","Research","Technology"],["Mathematics","Physics","Chemistry","Biology"],"medium","high");t.push(e)}return t.slice(0,3)}mapInterestToStream(e,t){let s=Math.min(t/100,1);switch(e){case"realistic":return this.createStreamRecommendation("science",s,["High realistic interest (".concat(t,"%)"),"Good for hands-on careers"],["Engineering","Agriculture","Technical Trades","Architecture"],["Mathematics","Physics","Chemistry"],"medium","high");case"investigative":return this.createStreamRecommendation("science",s,["High investigative interest (".concat(t,"%)"),"Strong analytical thinking"],["Research","Medicine","Engineering","Data Science"],["Mathematics","Physics","Chemistry","Biology"],"hard","high");case"artistic":return this.createStreamRecommendation("arts",s,["High artistic interest (".concat(t,"%)"),"Creative and expressive"],["Design","Media","Literature","Fine Arts"],["English","History","Fine Arts","Literature"],"easy","medium");case"social":return this.createStreamRecommendation("arts",s,["High social interest (".concat(t,"%)"),"People-oriented and empathetic"],["Teaching","Counseling","Social Work","Psychology"],["English","History","Psychology","Sociology"],"easy","medium");case"enterprising":return this.createStreamRecommendation("commerce",s,["High enterprising interest (".concat(t,"%)"),"Leadership and business acumen"],["Business","Management","Sales","Entrepreneurship"],["Mathematics","Economics","Business Studies","Accountancy"],"medium","high");case"conventional":return this.createStreamRecommendation("commerce",s,["High conventional interest (".concat(t,"%)"),"Organized and detail-oriented"],["Banking","Finance","Administration","Accounting"],["Mathematics","Economics","Accountancy","Business Studies"],"easy","high");default:return null}}createStreamRecommendation(e,t,s,a,i,r,n){return{stream:e,confidence:t,reasoning:s,career_prospects:a,required_subjects:i,difficulty_level:r,job_market_demand:n}}getFallbackStreamRecommendations(e){let t=[];return(null==e?void 0:e.class_level)==="10"&&t.push(this.createStreamRecommendation("science",.7,["Most popular choice","Good career prospects","Flexible options"],["Engineering","Medicine","Research","Technology"],["Mathematics","Physics","Chemistry","Biology"],"medium","high"),this.createStreamRecommendation("commerce",.6,["Growing demand","Business opportunities","Stable career paths"],["Business","Finance","Management","Banking"],["Mathematics","Economics","Business Studies","Accountancy"],"easy","high"),this.createStreamRecommendation("arts",.5,["Creative fields","Humanities","Social sciences"],["Teaching","Media","Design","Literature"],["English","History","Political Science","Psychology"],"easy","medium")),t}async generateCollegeRecommendations(e){var t,s,a,i,r,n,o,c;let l=[],{user_profile:h,practical_constraints:d}=e;0===this.cachedColleges.length&&await this.loadCachedData();let u=this.cachedColleges;for(let m of((null==h||null==(t=h.location)?void 0:t.state)&&(u=u.filter(e=>{var t;return(null==(t=e.location)?void 0:t.state)===h.location.state})),(null==d?void 0:d.financial_background)==="low"&&(u=u.filter(e=>{let t=e.type;return"government"===t||"government_aided"===t})),u.slice(0,10))){let t=this.calculateCollegeMatchScore(m,e),h=this.generateCollegeMatchReasons(m,e);t>.3&&l.push({college_id:m.id,college_name:m.name,match_score:t,reasons:h,programs_offered:(null==(s=m.programs)?void 0:s.map(e=>e.name))||[],admission_criteria:(null==(i=m.programs)||null==(a=i[0])?void 0:a.eligibility)||"Check college website",fee_structure:(null==(n=m.programs)||null==(r=n[0])?void 0:r.fees)||"Contact college",location:"".concat(null==(o=m.location)?void 0:o.city,", ").concat(null==(c=m.location)?void 0:c.state)})}return l.sort((e,t)=>t.match_score-e.match_score).slice(0,5)}calculateCollegeMatchScore(e,t){var s,a;let i=.5,{user_profile:r,practical_constraints:n}=t;(null==r||null==(s=r.location)?void 0:s.state)===(null==(a=e.location)?void 0:a.state)&&(i+=.2),(null==n?void 0:n.financial_background)==="low"&&("government"===e.type||"government_aided"===e.type)&&(i+=.2),"government"===e.type&&(i+=.1);let o=e.programs;return o&&o.length>0&&(i+=.1),Math.min(i,1)}generateCollegeMatchReasons(e,t){var s,a;let i=[],{user_profile:r,practical_constraints:n}=t;(null==r||null==(s=r.location)?void 0:s.state)===(null==(a=e.location)?void 0:a.state)&&i.push("Located in your preferred state"),(null==n?void 0:n.financial_background)==="low"&&("government"===e.type||"government_aided"===e.type)&&i.push("Affordable fee structure"),"government"===e.type&&i.push("Government college with good reputation");let o=e.programs;return o&&o.length>0&&i.push("Offers ".concat(o.length," programs")),i}async generateCareerRecommendations(e){let t=[],{assessment_scores:s}=e;if(!(null==s?void 0:s.riasec_scores))return this.getFallbackCareerRecommendations();for(let[e]of Object.entries(s.riasec_scores).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).slice(0,2))for(let s of this.cachedCareers.filter(t=>{var s;return null==(s=t.riasec_types)?void 0:s.includes(e)}).slice(0,2))t.push({career_name:s.name,description:s.description,required_education:s.required_education,salary_range:s.salary_range,job_market_demand:s.job_market_demand,growth_prospects:s.growth_prospects,required_skills:s.required_skills,related_streams:s.related_streams});return t.slice(0,5)}calculateCareerEligibilityMatch(){return .7}getFallbackCareerRecommendations(){return this.cachedCareers.slice(0,3).map(e=>({career_name:e.name,description:e.description,required_education:e.required_education,salary_range:e.salary_range,job_market_demand:e.job_market_demand,growth_prospects:e.growth_prospects,required_skills:e.required_skills,related_streams:e.related_streams}))}async generateScholarshipRecommendations(e){let t=[];for(let s of(0===this.cachedScholarships.length&&await this.loadCachedData(),this.cachedScholarships.slice(0,5))){let a=this.calculateScholarshipEligibilityMatch(s,e),i=this.generateScholarshipMatchReasons(s,e);a>.3&&t.push({scholarship_id:s.id,scholarship_name:s.name,amount:s.amount,eligibility_match:a,application_deadline:s.application_deadline,application_process:s.application_process,reasons:i})}return t.sort((e,t)=>t.eligibility_match-e.eligibility_match)}calculateScholarshipEligibilityMatch(e,t){var s,a;let i=.5;return(null==(s=t.practical_constraints)?void 0:s.financial_background)==="low"&&(i+=.3),(null==(a=t.assessment_scores)?void 0:a.aptitude_scores)&&Object.values(t.assessment_scores.aptitude_scores).reduce((e,t)=>e+t,0)/Object.keys(t.assessment_scores.aptitude_scores).length>70&&(i+=.2),Math.min(i,1)}generateScholarshipMatchReasons(e,t){var s;let a=[],{practical_constraints:i}=t;return(null==i?void 0:i.financial_background)==="low"&&a.push("Matches your financial need"),(null==(s=t.assessment_scores)?void 0:s.aptitude_scores)&&Object.values(t.assessment_scores.aptitude_scores).reduce((e,t)=>e+t,0)/Object.keys(t.assessment_scores.aptitude_scores).length>70&&a.push("Good academic performance"),a.push("Active scholarship program"),a}calculateConfidenceScore(e,t,s,a){let i=e.length>0?e.reduce((e,t)=>e+t.confidence,0)/e.length:0,r=(i+(t.length>0?t.reduce((e,t)=>e+t.match_score,0)/t.length:0)+(a.length>0?a.reduce((e,t)=>e+t.eligibility_match,0)/a.length:0))/3;return this.isOnline?r:.8*r}getOnlineStatus(){return this.isOnline}constructor(){this.isOnline=navigator.onLine,this.cachedColleges=[],this.cachedScholarships=[],this.cachedCareers=[],this.setupEventListeners(),this.initializeCache()}}let j=new b;var E=s(74636);class T{setupEventListeners(){window.addEventListener("online",()=>{this.isOnline=!0,this.refreshMapData()}),window.addEventListener("offline",()=>{this.isOnline=!1})}async initializeCache(){try{await f.Vc.initialize(),await this.loadCachedTiles(),await this.loadCachedLocations()}catch(e){console.error("Failed to initialize offline maps:",e)}}async loadCachedTiles(){try{let e=localStorage.getItem("map_tiles_cache");if(e){let t=JSON.parse(e);Object.entries(t).forEach(e=>{let[t,s]=e;this.tileCache.set(t,s)})}}catch(e){console.error("Failed to load cached tiles:",e)}}async loadCachedLocations(){try{let e=localStorage.getItem("map_locations_cache");if(e){let t=JSON.parse(e);Object.entries(t).forEach(e=>{let[t,s]=e;this.locationCache.set(t,s)})}}catch(e){console.error("Failed to load cached locations:",e)}}async saveCachedTiles(){try{let e=Object.fromEntries(this.tileCache);localStorage.setItem("map_tiles_cache",JSON.stringify(e))}catch(e){console.error("Failed to save cached tiles:",e)}}async saveCachedLocations(){try{let e=Object.fromEntries(this.locationCache);localStorage.setItem("map_locations_cache",JSON.stringify(e))}catch(e){console.error("Failed to save cached locations:",e)}}async getMapTile(e,t,s){let a="".concat(s,"/").concat(e,"/").concat(t),i=this.tileCache.get(a);if(i&&this.isTileValid(i))return i.last_accessed=Date.now(),i;if(this.isOnline)try{let i=await this.fetchTileFromNetwork(e,t,s);if(i)return await this.cacheTile(a,i),i}catch(e){console.error("Failed to fetch tile from network:",e)}return i||null}async fetchTileFromNetwork(e,t,s){try{let a="https://tile.openstreetmap.org/".concat(s,"/").concat(e,"/").concat(t,".png"),i=await fetch(a);if(!i.ok)throw Error("HTTP ".concat(i.status));let r=await i.arrayBuffer();return{x:e,y:t,z:s,data:r,timestamp:Date.now(),size:r.byteLength}}catch(e){return console.error("Failed to fetch tile:",e),null}}async cacheTile(e,t){await this.cleanupCache(),this.tileCache.set(e,t),await this.saveCachedTiles()}isTileValid(e){return Date.now()-e.timestamp<this.TILE_EXPIRY}async cleanupCache(){if(this.getCacheSize()>this.MAX_CACHE_SIZE){let e=Array.from(this.tileCache.entries()).sort((e,t)=>{let[,s]=e,[,a]=t;return s.timestamp-a.timestamp}),t=Math.floor(.25*e.length);for(let s=0;s<t;s++){let[t]=e[s];this.tileCache.delete(t)}await this.saveCachedTiles()}}getCacheSize(){return Array.from(this.tileCache.values()).reduce((e,t)=>e+t.size,0)}async cacheLocation(e){let t="loc_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),s={...e,id:t,cached_at:new Date().toISOString(),last_accessed:new Date().toISOString()};return this.locationCache.set(t,s),await this.saveCachedLocations(),t}async getCachedLocations(e,t){let s=Array.from(this.locationCache.values());return t&&(s=s.filter(e=>e.type===t)),e&&(s=s.filter(t=>t.coordinates.lat>=e.south&&t.coordinates.lat<=e.north&&t.coordinates.lng>=e.west&&t.coordinates.lng<=e.east)),s.sort((e,t)=>new Date(t.last_accessed).getTime()-new Date(e.last_accessed).getTime()),s}async getNearbyColleges(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return(await this.getCachedLocations(void 0,"college")).filter(s=>this.calculateDistance(e,s.coordinates)<=t).sort((t,s)=>this.calculateDistance(e,t.coordinates)-this.calculateDistance(e,s.coordinates))}calculateDistance(e,t){let s=this.toRadians(t.lat-e.lat),a=this.toRadians(t.lng-e.lng),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.toRadians(e.lat))*Math.cos(this.toRadians(t.lat))*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371}toRadians(e){return Math.PI/180*e}async preloadMapTiles(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!this.isOnline)return;let a=this.getTilesInBounds(e,t,s);for(let e=0;e<a.length;e+=5){let t=a.slice(e,e+5);await Promise.all(t.map(e=>{let{x:t,y:s,z:a}=e;return this.getMapTile(t,s,a)})),await new Promise(e=>setTimeout(e,100))}}getTilesInBounds(e,t,s){let a=[],i=this.latLngToTile(e.lat,e.lng,t);for(let e=i.x-s;e<=i.x+s;e++)for(let r=i.y-s;r<=i.y+s;r++)a.push({x:e,y:r,z:t});return a}latLngToTile(e,t,s){return{x:Math.floor((t+180)/360*Math.pow(2,s)),y:Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,s))}}async refreshMapData(){if(this.isOnline)try{await this.refreshCollegeLocations(),await this.cleanupExpiredTiles(),await this.cleanupExpiredLocations()}catch(e){console.error("Failed to refresh map data:",e)}}async refreshCollegeLocations(){try{for(let t of(await f.Vc.getCachedColleges())){var e;(null==(e=t.location)?void 0:e.coordinates)&&await this.cacheLocation({name:t.name,type:"college",coordinates:t.location.coordinates,address:t.address,metadata:{college_id:t.id,type:t.type,programs:t.programs}})}}catch(e){console.error("Failed to refresh college locations:",e)}}async cleanupExpiredTiles(){let e=Date.now(),t=[];for(let[s,a]of this.tileCache.entries())e-a.timestamp>this.TILE_EXPIRY&&t.push(s);t.forEach(e=>this.tileCache.delete(e)),t.length>0&&await this.saveCachedTiles()}async cleanupExpiredLocations(){let e=Date.now(),t=[];for(let[s,a]of this.locationCache.entries())e-new Date(a.last_accessed).getTime()>this.LOCATION_EXPIRY&&t.push(s);t.forEach(e=>this.locationCache.delete(e)),t.length>0&&await this.saveCachedLocations()}getCacheStats(){let e=this.getCacheSize(),t=this.tileCache.size;return{total_tiles:t,total_size:e,cached_locations:this.locationCache.size,last_updated:new Date(Array.from(this.tileCache.values()).reduce((e,t)=>Math.max(e,t.timestamp),0)).toISOString()}}async clearCache(){this.tileCache.clear(),this.locationCache.clear(),await this.saveCachedTiles(),await this.saveCachedLocations()}getOnlineStatus(){return this.isOnline}async exportCache(){return{tiles:Object.fromEntries(this.tileCache),locations:Object.fromEntries(this.locationCache)}}async importCache(e){this.tileCache.clear(),this.locationCache.clear(),Object.entries(e.tiles).forEach(e=>{let[t,s]=e;this.tileCache.set(t,s)}),Object.entries(e.locations).forEach(e=>{let[t,s]=e;this.locationCache.set(t,s)}),await this.saveCachedTiles(),await this.saveCachedLocations()}constructor(){this.tileCache=new Map,this.locationCache=new Map,this.isOnline=navigator.onLine,this.MAX_CACHE_SIZE=0x3200000,this.TILE_EXPIRY=6048e5,this.LOCATION_EXPIRY=2592e6,this.setupEventListeners(),this.initializeCache()}}let O=new T;class q{async runAllTests(){let e=Date.now();this.results=[],console.log("\uD83E\uDDEA Starting Offline-First Test Suite..."),await this.testOfflineStorage(),await this.testQuizSystem(),await this.testRecommendationsEngine(),await this.testSarthiAI(),await this.testMapsSystem(),await this.testSyncEngine(),await this.testOfflineOnlineTransitions();let t=Date.now()-e,s=this.results.filter(e=>e.passed).length,a=this.results.filter(e=>!e.passed).length,i=this.generateSummary(s,a,t);return console.log("✅ Test Suite Complete:",i),{totalTests:this.results.length,passedTests:s,failedTests:a,totalDuration:t,results:this.results,summary:i}}async runTest(e,t){let s=Date.now();console.log("  \uD83D\uDD0D Running: ".concat(e));try{await t();let a=Date.now()-s;return console.log("  ✅ Passed: ".concat(e," (").concat(a,"ms)")),{testName:e,passed:!0,duration:a}}catch(a){let t=Date.now()-s;return console.log("  ❌ Failed: ".concat(e," (").concat(t,"ms) - ").concat(a)),{testName:e,passed:!1,error:a instanceof Error?a.message:String(a),duration:t}}}async testOfflineStorage(){console.log("\uD83D\uDCE6 Testing Offline Storage..."),await this.runTest("Offline Storage Initialization",async()=>{await f.Vc.initialize()}),await this.runTest("Quiz Response Storage",async()=>{if(!await f.Vc.saveQuizResponse({session_id:"test_session_1",question_id:"test_question_1",user_answer:2,time_taken:30,is_correct:!0,answered_at:new Date().toISOString()}))throw Error("Failed to save quiz response");if(0===(await f.Vc.getQuizResponses("test_session_1")).length)throw Error("Failed to retrieve quiz responses")}),await this.runTest("Assessment Session Storage",async()=>{let e=await f.Vc.saveAssessmentSession({user_id:"test_user_1",status:"in_progress",started_at:new Date().toISOString(),total_score:0,total_questions:10,answered_questions:0,time_spent:0,session_type:"comprehensive"});if(!e)throw Error("Failed to save assessment session");if(!await f.Vc.getAssessmentSession(e))throw Error("Failed to retrieve assessment session")}),await this.runTest("College Data Caching",async()=>{let e=[{id:"college_1",name:"Test College",type:"government",location:{state:"Test State",city:"Test City"},address:"Test Address",is_active:!0,cached_at:new Date().toISOString(),last_synced:new Date().toISOString()}];if(await f.Vc.cacheColleges(e),0===(await f.Vc.getCachedColleges()).length)throw Error("Failed to cache or retrieve colleges")}),await this.runTest("Storage Statistics",async()=>{if("number"!=typeof(await f.Vc.getStorageStats()).quizResponses)throw Error("Invalid storage stats format")})}async testQuizSystem(){console.log("\uD83D\uDCDD Testing Quiz System..."),await this.runTest("Question Loading",async()=>{if(0===(await x.getQuestionsForSession("comprehensive",5)).length)throw Error("No questions loaded")}),await this.runTest("Quiz Session Management",async()=>{let e=await x.startQuizSession("test_user_1","comprehensive");if(!e)throw Error("Failed to start quiz session");await x.submitAnswer(e.id,{question_id:"test_question_1",selected_answer:1,time_taken:25,question_type:"aptitude",category:"logical_reasoning"})}),await this.runTest("Quiz Session Completion",async()=>{let e=await x.startQuizSession("test_user_2","comprehensive");for(let t=0;t<3;t++)await x.submitAnswer(e.id,{question_id:"test_question_".concat(t),selected_answer:t%2,time_taken:20+5*t,question_type:"aptitude",category:"logical_reasoning"});if(!(await x.completeQuizSession(e.id,{location:"Test Location",financial_background:"medium",parental_expectation:"supportive"})).session_id)throw Error("Failed to complete quiz session")}),await this.runTest("Online Status Detection",async()=>{if("boolean"!=typeof x.getOnlineStatus())throw Error("Invalid online status format")})}async testRecommendationsEngine(){console.log("\uD83C\uDFAF Testing Recommendations Engine..."),await this.runTest("Recommendation Generation",async()=>{let e=await j.generateRecommendations({user_id:"test_user_1",assessment_scores:{aptitude_scores:{logical_reasoning:75,quantitative_skills:80,language_verbal_skills:70},riasec_scores:{realistic:60,investigative:85,artistic:40,social:50,enterprising:45,conventional:55},personality_scores:{introvert_extrovert:60,risk_taking_vs_risk_averse:70},subject_performance:{mathematics:{accuracy:80,speed:75},science:{accuracy:85,speed:80}}},practical_constraints:{location:"Delhi",financial_background:"medium",parental_expectation:"supportive"},user_profile:{class_level:"12",interests:["science","technology"],location:{state:"Delhi",city:"New Delhi"}}});if(!e.stream_recommendations||0===e.stream_recommendations.length)throw Error("No stream recommendations generated");if(!e.college_recommendations)throw Error("No college recommendations generated")}),await this.runTest("Recommendations Online Status",async()=>{if("boolean"!=typeof j.getOnlineStatus())throw Error("Invalid online status format")})}async testSarthiAI(){console.log("\uD83E\uDD16 Testing Sarthi AI..."),await this.runTest("Message Processing",async()=>{let e=await E.v.processMessage("What stream should I choose after class 10?","test_session_1",{user_profile:{user_id:"test_user_1",class_level:"10",interests:["science","mathematics"],location:{state:"Delhi",city:"New Delhi"}}});if(!e.response||0===e.response.length)throw Error("No response generated");if("number"!=typeof e.confidence_score)throw Error("Invalid confidence score format")}),await this.runTest("Offline Mode Response",async()=>{if(!(await E.v.processMessage("How do I prepare for competitive exams?","test_session_2",{user_profile:{user_id:"test_user_2",class_level:"12",interests:["engineering"],location:{state:"Mumbai",city:"Mumbai"}}})).response)throw Error("No offline response generated")}),await this.runTest("Conversation History",async()=>{if(!Array.isArray(await E.v.getConversationHistory("test_session_1")))throw Error("Invalid conversation history format")})}async testMapsSystem(){console.log("\uD83D\uDDFA️ Testing Maps System..."),await this.runTest("Location Caching",async()=>{if(!await O.cacheLocation({name:"Test College",type:"college",coordinates:{lat:28.6139,lng:77.209},address:"Test Address, New Delhi",metadata:{college_id:"test_college_1"}}))throw Error("Failed to cache location");if(0===(await O.getCachedLocations()).length)throw Error("No cached locations found")}),await this.runTest("Nearby Colleges Search",async()=>{if(!Array.isArray(await O.getNearbyColleges({lat:28.6139,lng:77.209},50)))throw Error("Invalid nearby colleges format")}),await this.runTest("Maps Cache Statistics",async()=>{if("number"!=typeof O.getCacheStats().total_tiles)throw Error("Invalid cache stats format")}),await this.runTest("Maps Online Status",async()=>{if("boolean"!=typeof O.getOnlineStatus())throw Error("Invalid online status format")})}async testSyncEngine(){console.log("\uD83D\uDD04 Testing Sync Engine..."),await this.runTest("Sync Status",async()=>{if("boolean"!=typeof v.getSyncStatus().isOnline)throw Error("Invalid sync status format")}),await this.runTest("Sync Trigger",async()=>{try{await v.triggerSync()}catch(e){console.log("    ⚠️ Sync trigger failed as expected in test environment")}})}async testOfflineOnlineTransitions(){console.log("\uD83D\uDD04 Testing Offline-Online Transitions..."),await this.runTest("Storage Persistence",async()=>{if(await f.Vc.saveQuizResponse({session_id:"persistence_test",question_id:"test_question",user_answer:1,time_taken:30,answered_at:new Date().toISOString()}),await f.Vc.initialize(),0===(await f.Vc.getQuizResponses("persistence_test")).length)throw Error("Data did not persist after reinitialization")}),await this.runTest("Data Integrity",async()=>{let e=await f.Vc.getStorageStats();for(let t of["quizResponses","assessmentSessions","cachedColleges","cachedScholarships","awarenessContent","chatMessages","syncQueueItems"])if(!(t in e))throw Error("Missing field in storage stats: ".concat(t))})}generateSummary(e,t,s){let a=e+t,i=a>0?Math.round(e/a*100):0;return"Tests: ".concat(e,"/").concat(a," passed (").concat(i,"%) in ").concat(s,"ms")}async runStorageTests(){return this.results=[],await this.testOfflineStorage(),this.results}async runQuizTests(){return this.results=[],await this.testQuizSystem(),this.results}async runRecommendationTests(){return this.results=[],await this.testRecommendationsEngine(),this.results}async runAITests(){return this.results=[],await this.testSarthiAI(),this.results}async runMapsTests(){return this.results=[],await this.testMapsSystem(),this.results}async runSyncTests(){return this.results=[],await this.testSyncEngine(),this.results}async runTransitionTests(){return this.results=[],await this.testOfflineOnlineTransitions(),this.results}constructor(){this.results=[]}}let I=new q;function N(){let[e,t]=(0,i.useState)(!1),[s,w]=(0,i.useState)(null),[S,C]=(0,i.useState)(navigator.onLine),[x,b]=(0,i.useState)(null),[j,E]=(0,i.useState)(null);(0,i.useEffect)(()=>{let e=()=>C(!0),t=()=>C(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),T(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[]);let T=async()=>{try{await f.Vc.initialize();let e=await f.Vc.getStorageStats();b(e);let t=v.getSyncStatus();E(t)}catch(e){console.error("Failed to load initial data:",e)}},O=async()=>{t(!0),w(null);try{let e=await I.runAllTests();w(e)}catch(e){console.error("Test suite failed:",e)}finally{t(!1)}},q=async e=>{t(!0),w(null);try{let t=[];switch(e){case"storage":t=await I.runStorageTests();break;case"quiz":t=await I.runQuizTests();break;case"recommendations":t=await I.runRecommendationTests();break;case"ai":t=await I.runAITests();break;case"maps":t=await I.runMapsTests();break;case"sync":t=await I.runSyncTests();break;case"transitions":t=await I.runTransitionTests()}let s=t.reduce((e,t)=>e+t.duration,0),a=t.filter(e=>e.passed).length,i=t.filter(e=>!e.passed).length;w({totalTests:t.length,passedTests:a,failedTests:i,totalDuration:s,results:t,summary:"Tests: ".concat(a,"/").concat(t.length," passed in ").concat(s,"ms")})}catch(e){console.error("Specific tests failed:",e)}finally{t(!1)}},N=async()=>{try{await f.Vc.clearAllData(),await T(),alert("Offline data cleared successfully")}catch(e){console.error("Failed to clear offline data:",e),alert("Failed to clear offline data")}},D=async()=>{try{let e=await v.triggerSync();console.log("Sync result:",e),await T(),alert("Sync completed: ".concat(e.syncedItems," items synced"))}catch(e){console.error("Sync failed:",e),alert("Sync failed")}},M=e=>e.includes("Storage")?"storage":e.includes("Quiz")?"quiz":e.includes("Recommendation")?"recommendations":e.includes("AI")||e.includes("Sarthi")?"ai":e.includes("Maps")?"maps":e.includes("Sync")?"sync":e.includes("Transition")?"transitions":"other";return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Offline-First Test Suite"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Comprehensive testing of PathNiti's offline capabilities and sync functionality"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsxs)(n.ZB,{className:"text-lg flex items-center space-x-2",children:[S?(0,a.jsx)(p.A,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(y.A,{className:"h-5 w-5 text-orange-600"}),(0,a.jsx)("span",{children:"Connection Status"})]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.E,{className:S?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800",children:S?"Online":"Offline"}),(null==j?void 0:j.syncInProgress)&&(0,a.jsx)(o.E,{className:"bg-blue-100 text-blue-800",children:"Syncing..."})]})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsxs)(n.ZB,{className:"text-lg flex items-center space-x-2",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{children:"Storage Stats"})]})}),(0,a.jsx)(n.Wu,{children:x?(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"text-sm",children:["Quiz Responses: ",x.quizResponses]}),(0,a.jsxs)("div",{className:"text-sm",children:["Cached Colleges: ",x.cachedColleges]}),(0,a.jsxs)("div",{className:"text-sm",children:["Chat Messages: ",x.chatMessages]})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Loading..."})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{className:"pb-3",children:(0,a.jsxs)(n.ZB,{className:"text-lg flex items-center space-x-2",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 text-cyan-600"}),(0,a.jsx)("span",{children:"Sync Status"})]})}),(0,a.jsx)(n.Wu,{children:j?(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"text-sm",children:["Last Sync:"," ",j.lastSyncTime?new Date(j.lastSyncTime).toLocaleString():"Never"]}),(0,a.jsxs)("div",{className:"text-sm",children:["Pending Items: ",j.pendingItems||0]}),j.lastError&&(0,a.jsxs)("div",{className:"text-sm text-red-600",children:["Error: ",j.lastError]})]}):(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Loading..."})})]})]}),(0,a.jsxs)(n.Zp,{className:"mb-8",children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Test Controls"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)(r.$,{onClick:O,disabled:e,className:"bg-blue-600 hover:bg-blue-700",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Tests..."]}):"Run All Tests"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["storage","quiz","recommendations","ai","maps","sync","transitions"].map(t=>(0,a.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>q(t),disabled:e,children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),(0,a.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,a.jsxs)(r.$,{variant:"outline",onClick:D,disabled:!S,children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Trigger Sync"]}),(0,a.jsx)(r.$,{variant:"outline",onClick:N,className:"text-red-600 hover:text-red-700",children:"Clear Data"})]})]})})]}),s&&(0,a.jsxs)(n.Zp,{children:[(0,a.jsx)(n.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(n.ZB,{children:"Test Results"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600",children:s.summary}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(o.E,{className:"bg-green-100 text-green-800",children:[s.passedTests," Passed"]}),(0,a.jsxs)(o.E,{className:"bg-red-100 text-red-800",children:[s.failedTests," Failed"]})]})]})]})}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:s.results.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[e.passed?(0,a.jsx)(h.A,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(_.A,{className:"h-5 w-5 text-red-600"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(s=e.testName).includes("Storage")?(0,a.jsx)(c.A,{className:"h-4 w-4"}):s.includes("Quiz")?(0,a.jsx)(l.A,{className:"h-4 w-4"}):s.includes("Recommendation")?(0,a.jsx)(h.A,{className:"h-4 w-4"}):s.includes("AI")||s.includes("Sarthi")?(0,a.jsx)(d.A,{className:"h-4 w-4"}):s.includes("Maps")?(0,a.jsx)(u.A,{className:"h-4 w-4"}):s.includes("Sync")?(0,a.jsx)(m.A,{className:"h-4 w-4"}):(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:e.testName})]}),(0,a.jsx)(o.E,{className:(e=>{let t={storage:"bg-blue-100 text-blue-800",quiz:"bg-green-100 text-green-800",recommendations:"bg-purple-100 text-purple-800",ai:"bg-pink-100 text-pink-800",maps:"bg-orange-100 text-orange-800",sync:"bg-cyan-100 text-cyan-800",transitions:"bg-yellow-100 text-yellow-800",other:"bg-gray-100 text-gray-800"};return t[e]||t.other})(M(e.testName)),children:M(e.testName)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.duration,"ms"]}),e.error&&(0,a.jsx)("div",{className:"text-sm text-red-600 max-w-md truncate",children:e.error})]})]},t)})})})]}),(0,a.jsxs)(n.Zp,{className:"mt-8",children:[(0,a.jsx)(n.aR,{children:(0,a.jsx)(n.ZB,{children:"Testing Instructions"})}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4 text-sm text-gray-600",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"How to Test Offline Functionality:"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,a.jsx)("li",{children:"Run the test suite while online to verify all systems work"}),(0,a.jsx)("li",{children:"Disconnect from the internet (or use browser dev tools to simulate offline)"}),(0,a.jsx)("li",{children:"Run tests again to verify offline functionality"}),(0,a.jsx)("li",{children:"Reconnect to the internet and trigger sync to test data synchronization"}),(0,a.jsx)("li",{children:"Check that offline data persists after page refresh"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Expected Behavior:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,a.jsx)("li",{children:"All tests should pass in both online and offline modes"}),(0,a.jsx)("li",{children:"Data should persist in offline storage"}),(0,a.jsx)("li",{children:"Sync should work when coming back online"}),(0,a.jsx)("li",{children:"UI should show appropriate online/offline status"})]})]})]})})]})]})})})}},76443:(e,t,s)=>{Promise.resolve().then(s.bind(s,8401))}},e=>{e.O(0,[8096,6332,4636,8441,7358],()=>e(e.s=76443)),_N_E=e.O()}]);