(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1714],{11863:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var r=t(95155),a=t(12115),l=t(47061),i=t(65306),n=t(66861),d=t(27601),o=t(86948),c=t(3998),u=t(35626),m=t(47937),h=t(52619),f=t.n(h);function x(){let{user:e,loading:s}=(0,l.A)(),[t,h]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{if(e)try{let s=await fetch("/api/assessment/last-test?user_id=".concat(e.id)),t=await s.json();h(t.success)}catch(e){console.error("Error checking test status:",e),h(!1)}})()},[e]),s)?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[(0,r.jsx)(n.DynamicHeader,{}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})})]}):(0,r.jsx)(i.AuthGuard,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[(0,r.jsx)(n.DynamicHeader,{}),(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,r.jsx)(f(),{href:"/dashboard",children:(0,r.jsxs)(c.$,{variant:"outline",size:"sm",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-3 bg-blue-100 rounded-2xl",children:(0,r.jsx)(m.A,{className:"h-8 w-8 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Test Review"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Review your last assessment with detailed analysis"})]})]})]}),null===t?(0,r.jsx)(o.Zp,{children:(0,r.jsxs)(o.Wu,{className:"p-8 text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Checking for completed tests..."})]})}):t?(0,r.jsx)(d.A,{userId:e.id}):(0,r.jsxs)(o.Zp,{children:[(0,r.jsx)(o.aR,{children:(0,r.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"h-5 w-5 text-blue-600"}),"No Test Found"]})}),(0,r.jsxs)(o.Wu,{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(m.A,{className:"h-12 w-12 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Completed Tests Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You haven't completed any assessments yet. Take an assessment to see your detailed review here."}),(0,r.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,r.jsx)(f(),{href:"/comprehensive-assessment",children:(0,r.jsxs)(c.$,{children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Take Assessment"]})}),(0,r.jsx)(f(),{href:"/dashboard",children:(0,r.jsx)(c.$,{variant:"outline",children:"Back to Dashboard"})})]})]})]})]})]})})}},13406:(e,s,t)=>{"use strict";t.d(s,{Tabs:()=>n,TabsContent:()=>c,TabsList:()=>d,TabsTrigger:()=>o});var r=t(95155),a=t(12115),l=t(25667),i=t(64269);let n=l.bL,d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.B8,{ref:s,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...a})});d.displayName=l.B8.displayName;let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.l9,{ref:s,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...a})});o.displayName=l.l9.displayName;let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(l.UC,{ref:s,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...a})});c.displayName=l.UC.displayName},18332:(e,s,t)=>{"use strict";t.d(s,{Alert:()=>d,AlertDescription:()=>c,AlertTitle:()=>o});var r=t(95155),a=t(12115),l=t(83101),i=t(64269);let n=(0,l.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,...l}=e;return(0,r.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(n({variant:a}),t),...l})});d.displayName="Alert";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("h5",{ref:s,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});o.displayName="AlertTitle";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",t),...a})});c.displayName="AlertDescription"},37022:(e,s,t)=>{Promise.resolve().then(t.bind(t,11863))},65306:(e,s,t)=>{"use strict";t.d(s,{AdminGuard:()=>d,AuthGuard:()=>n,CollegeGuard:()=>c,StudentGuard:()=>o});var r=t(95155),a=t(12115),l=t(47061),i=t(20063);function n(e){let{children:s,requireAuth:t=!0,requiredRole:n,fallback:d}=e,{user:o,session:c,profile:u,loading:m}=(0,l.A)(),h=(0,i.useRouter)(),[f,x]=(0,a.useState)(!0),[g,p]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=setTimeout(async()=>{if(console.log("AuthGuard: Checking authentication state",{loading:m,hasUser:!!o,hasSession:!!c,hasProfile:!!u,requireAuth:t,requiredRole:n,userEmail:null==o?void 0:o.email,profileRole:null==u?void 0:u.role}),m){console.log("AuthGuard: Still loading, waiting..."),x(!0);return}if(!t){console.log("AuthGuard: No auth required, rendering children"),p(!0),x(!1);return}if(!o||!c){console.log("AuthGuard: User not authenticated, redirecting to login"),setTimeout(()=>{h.push("/auth/login")},100);return}if(!u){if(console.log("AuthGuard: User authenticated but no profile, redirecting to complete profile"),console.log("AuthGuard: User details:",{userId:o.id,userEmail:o.email}),console.log("AuthGuard: Profile state:",u),console.log("AuthGuard: Loading state:",m),"/auth/complete-profile"===window.location.pathname){console.log("AuthGuard: Already on complete profile page, allowing access"),p(!0),x(!1);return}setTimeout(()=>{h.push("/auth/complete-profile")},100);return}if(n&&u.role!==n){console.log("AuthGuard: User role '".concat(u.role,"' does not match required role '").concat(n,"'"));let e=(()=>{switch(u.role){case"admin":return"/dashboard/admin";case"college":return"/dashboard/college";default:return"/dashboard/student"}})();setTimeout(()=>{h.push(e)},100);return}console.log("AuthGuard: All checks passed, rendering children"),p(!0),x(!1)},500);return()=>clearTimeout(e)},[m,o,c,u,t,n,h]),f||m)?d||(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Verifying authentication..."})]})}):g?(0,r.jsx)(r.Fragment,{children:s}):null}function d(e){let{children:s,fallback:t}=e;return(0,r.jsx)(n,{requireAuth:!0,requiredRole:"admin",fallback:t,children:s})}function o(e){let{children:s,fallback:t}=e;return(0,r.jsx)(n,{requireAuth:!0,requiredRole:"student",fallback:t,children:s})}function c(e){let{children:s,fallback:t}=e;return(0,r.jsx)(n,{requireAuth:!0,requiredRole:"college",fallback:t,children:s})}}},e=>{e.O(0,[8096,6332,7061,6861,7601,8441,7358],()=>e(e.s=37022)),_N_E=e.O()}]);